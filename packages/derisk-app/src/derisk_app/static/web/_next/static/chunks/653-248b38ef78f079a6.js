(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[653],{92776:function(t,e,n){"use strict";n.d(e,{ni:function(){return p},EF:function(){return y}});var i,r=function(t,e){return t===e},o=function(){function t(t,e){void 0===e&&(e=null),this.value=t,this.next=e}return t.prototype.toString=function(t){return t?t(this.value):"".concat(this.value)},t}(),a=function(){function t(t){void 0===t&&(t=r),this.head=null,this.tail=null,this.compare=t}return t.prototype.prepend=function(t){var e=new o(t,this.head);return this.head=e,this.tail||(this.tail=e),this},t.prototype.append=function(t){var e=new o(t);return this.head?(this.tail.next=e,this.tail=e,this):(this.head=e,this.tail=e,this)},t.prototype.delete=function(t){if(!this.head)return null;for(var e=null;this.head&&this.compare(this.head.value,t);)e=this.head,this.head=this.head.next;var n=this.head;if(null!==n)for(;n.next;)this.compare(n.next.value,t)?(e=n.next,n.next=n.next.next):n=n.next;return this.compare(this.tail.value,t)&&(this.tail=n),e},t.prototype.find=function(t){var e=t.value,n=void 0===e?void 0:e,i=t.callback,r=void 0===i?void 0:i;if(!this.head)return null;for(var o=this.head;o;){if(r&&r(o.value)||void 0!==n&&this.compare(o.value,n))return o;o=o.next}return null},t.prototype.deleteTail=function(){var t=this.tail;if(this.head===this.tail)return this.head=null,this.tail=null,t;for(var e=this.head;e.next;)e.next.next?e=e.next:e.next=null;return this.tail=e,t},t.prototype.deleteHead=function(){if(!this.head)return null;var t=this.head;return this.head.next?this.head=this.head.next:(this.head=null,this.tail=null),t},t.prototype.fromArray=function(t){var e=this;return t.forEach(function(t){return e.append(t)}),this},t.prototype.toArray=function(){for(var t=[],e=this.head;e;)t.push(e),e=e.next;return t},t.prototype.reverse=function(){for(var t=this.head,e=null,n=null;t;)n=t.next,t.next=e,e=t,t=n;this.tail=this.head,this.head=e},t.prototype.toString=function(t){return void 0===t&&(t=void 0),this.toArray().map(function(e){return e.toString(t)}).toString()},t}();!function(){function t(){this.linkedList=new a}t.prototype.isEmpty=function(){return!this.linkedList.head},t.prototype.peek=function(){return this.linkedList.head?this.linkedList.head.value:null},t.prototype.enqueue=function(t){this.linkedList.append(t)},t.prototype.dequeue=function(){var t=this.linkedList.deleteHead();return t?t.value:null},t.prototype.toString=function(t){return this.linkedList.toString(t)}}();var s=function(t,e,n){void 0===e&&(e=[]);var i=e.filter(function(e){return e.source===t||e.target===t});return"target"===n?i.filter(function(e){return e.source===t}).map(function(t){return t.target}):"source"===n?i.filter(function(e){return e.target===t}).map(function(t){return t.source}):i.map(function(e){return e.source===t?e.target:e.source})},h=function(t){var e={},n=t.nodes,i=t.edges;return(void 0===n?[]:n).forEach(function(t){e[t.id]={degree:0,inDegree:0,outDegree:0}}),(void 0===i?[]:i).forEach(function(t){e[t.source].degree++,e[t.source].outDegree++,e[t.target].degree++,e[t.target].inDegree++}),e},l=n(15767),u=n(69499),c=function(t,e,n){for(var i,r=1/0,o=0;o<e.length;o++){var a=e[o].id;!n[a]&&t[a]<=r&&(r=t[a],i=e[o])}return i},d=function(t,e,n,i){var r=t.nodes,o=void 0===r?[]:r,a=t.edges,s=void 0===a?[]:a,h=[],d={},p={},f={};o.forEach(function(t,n){var i=t.id;h.push(i),p[i]=1/0,i===e&&(p[i]=0)});for(var y=o.length,g=0;g<y;g++)!function(t){var e=c(p,o,d),r=e.id;if(d[r]=!0,p[r]!==1/0){var a=[];(n?s.filter(function(t){return t.source===r}):s.filter(function(t){return t.source===r||t.target===r})).forEach(function(t){var n=t.target,o=t.source,a=n===r?o:n,s=i&&t[i]?t[i]:1;p[a]>p[e.id]+s?(p[a]=p[e.id]+s,f[a]=[e.id]):p[a]===p[e.id]+s&&f[a].push(e.id)})}}(0);f[e]=[e];var v={};for(var b in p)p[b]!==1/0&&function t(e,n,i,r){if(e===n)return[e];if(r[n])return r[n];for(var o=[],a=0,s=i[n];a<s.length;a++){var h=t(e,s[a],i,r);if(!h)return;for(var c=0;c<h.length;c++){var d=h[c];(0,u.kJ)(d)?o.push((0,l.ev)((0,l.ev)([],d,!0),[n],!1)):o.push([d,n])}}return r[n]=o,r[n]}(e,b,f,v);var x={};for(var b in v)x[b]=v[b][0];return{length:p,path:x,allPath:v}},p=function(t,e,n,i,r){var o=d(t,e,i,r),a=o.length,s=o.path,h=o.allPath;return{length:a[n],path:s[n],allPath:h[n]}};!function(){function t(t){this.arr=t}t.prototype.getArr=function(){return this.arr||[]},t.prototype.add=function(e){var n,i=e.arr;if(!(null===(n=this.arr)||void 0===n?void 0:n.length))return new t(i);if(!(null==i?void 0:i.length))return new t(this.arr);if(this.arr.length===i.length){var r=[];for(var o in this.arr)r[o]=this.arr[o]+i[o];return new t(r)}},t.prototype.subtract=function(e){var n,i=e.arr;if(!(null===(n=this.arr)||void 0===n?void 0:n.length))return new t(i);if(!(null==i?void 0:i.length))return new t(this.arr);if(this.arr.length===i.length){var r=[];for(var o in this.arr)r[o]=this.arr[o]-i[o];return new t(r)}},t.prototype.avg=function(e){var n=[];if(0!==e)for(var i in this.arr)n[i]=this.arr[i]/e;return new t(n)},t.prototype.negate=function(){var e=[];for(var n in this.arr)e[n]=-this.arr[n];return new t(e)},t.prototype.squareEuclideanDistance=function(t){var e,n=t.arr;if(!(null===(e=this.arr)||void 0===e?void 0:e.length)||!(null==n?void 0:n.length))return 0;if(this.arr.length===n.length){var i=0;for(var r in this.arr)i+=Math.pow(this.arr[r]-t.arr[r],2);return i}},t.prototype.euclideanDistance=function(t){var e,n=t.arr;if(!(null===(e=this.arr)||void 0===e?void 0:e.length)||!(null==n?void 0:n.length))return 0;if(this.arr.length===n.length){var i=0;for(var r in this.arr)i+=Math.pow(this.arr[r]-t.arr[r],2);return Math.sqrt(i)}console.error("The two vectors are unequal in length.")},t.prototype.normalize=function(){var e=[],n=(0,u.d9)(this.arr);n.sort(function(t,e){return t-e});var i=n[n.length-1],r=n[0];for(var o in this.arr)e[o]=(this.arr[o]-r)/(i-r);return new t(e)},t.prototype.norm2=function(){if(!(null===(t=this.arr)||void 0===t?void 0:t.length))return 0;var t,e=0;for(var n in this.arr)e+=Math.pow(this.arr[n],2);return Math.sqrt(e)},t.prototype.dot=function(t){var e,n=t.arr;if(!(null===(e=this.arr)||void 0===e?void 0:e.length)||!(null==n?void 0:n.length))return 0;if(this.arr.length===n.length){var i=0;for(var r in this.arr)i+=this.arr[r]*t.arr[r];return i}console.error("The two vectors are unequal in length.")},t.prototype.equal=function(t){var e,n=t.arr;if((null===(e=this.arr)||void 0===e?void 0:e.length)!==(null==n?void 0:n.length))return!1;for(var i in this.arr)if(this.arr[i]!==n[i])return!1;return!0}}(),(i||(i={})).EuclideanDistance="euclideanDistance",function(){function t(t){this.count=t.length,this.parent={};for(var e=0;e<t.length;e++){var n=t[e];this.parent[n]=n}}t.prototype.find=function(t){for(;this.parent[t]!==t;)t=this.parent[t];return t},t.prototype.union=function(t,e){var n=this.find(t),i=this.find(e);n!==i&&(n<i?(this.parent[e]!==e&&this.union(this.parent[e],t),this.parent[e]=this.parent[t]):(this.parent[t]!==t&&this.union(this.parent[t],e),this.parent[t]=this.parent[e]))},t.prototype.connected=function(t,e){return this.find(t)===this.find(e)}}();var f=function(t,e){return t-e};!function(){function t(t){void 0===t&&(t=f),this.compareFn=t,this.list=[]}t.prototype.getLeft=function(t){return 2*t+1},t.prototype.getRight=function(t){return 2*t+2},t.prototype.getParent=function(t){return 0===t?null:Math.floor((t-1)/2)},t.prototype.isEmpty=function(){return this.list.length<=0},t.prototype.top=function(){return this.isEmpty()?void 0:this.list[0]},t.prototype.delMin=function(){var t=this.top(),e=this.list.pop();return this.list.length>0&&(this.list[0]=e,this.moveDown(0)),t},t.prototype.insert=function(t){if(null!==t){this.list.push(t);var e=this.list.length-1;return this.moveUp(e),!0}return!1},t.prototype.moveUp=function(t){for(var e=this.getParent(t);t&&t>0&&this.compareFn(this.list[e],this.list[t])>0;){var n=this.list[e];this.list[e]=this.list[t],this.list[t]=n,t=e,e=this.getParent(t)}},t.prototype.moveDown=function(t){var e,n=t,i=this.getLeft(t),r=this.getRight(t),o=this.list.length;null!==i&&i<o&&this.compareFn(this.list[n],this.list[i])>0?n=i:null!==r&&r<o&&this.compareFn(this.list[n],this.list[r])>0&&(n=r),t!==n&&(e=[this.list[n],this.list[t]],this.list[t]=e[0],this.list[n]=e[1],this.moveDown(n))}}();var y=function(t,e,n){"number"!=typeof e&&(e=1e-6),"number"!=typeof n&&(n=.85);for(var i,r=1,o=0,a=1e3,l=t.nodes,u=void 0===l?[]:l,c=t.edges,d=void 0===c?[]:c,p=u.length,f={},y={},g=0;g<p;++g){var v=u[g],b=v.id;f[b]=1/p,y[b]=1/p}for(var x=h(t);a>0&&r>e;){o=0;for(var g=0;g<p;++g){var v=u[g],b=v.id;if(i=0,0===x[v.id].inDegree)f[b]=0;else{for(var m=s(b,d,"source"),w=0;w<m.length;++w){var E=m[w],M=x[E].outDegree;M>0&&(i+=y[E]/M)}f[b]=n*i,o+=f[b]}}o=(1-o)/p,r=0;for(var g=0;g<p;++g){var v=u[g],b=v.id;r+=Math.abs((i=f[b]+o)-y[b]),y[b]=i}a-=1}return y},g=function(t,e,n,i){void 0===t&&(t=-1),void 0===e&&(e=-1),void 0===n&&(n=-1),void 0===i&&(i="-1"),this.id=t,this.from=e,this.to=n,this.label=i},v=function(){function t(t,e){void 0===t&&(t=-1),void 0===e&&(e="-1"),this.id=t,this.label=e,this.edges=[],this.edgeMap={}}return t.prototype.addEdge=function(t){this.edges.push(t),this.edgeMap[t.id]=t},t}(),b=function(){function t(t,e,n){void 0===t&&(t=-1),void 0===e&&(e=!0),void 0===n&&(n=!1),this.id=t,this.edgeIdAutoIncrease=e,this.edges=[],this.nodes=[],this.nodeMap={},this.edgeMap={},this.nodeLabelMap={},this.edgeLabelMap={},this.counter=0,this.directed=n}return t.prototype.getNodeNum=function(){return this.nodes.length},t.prototype.addNode=function(t,e){if(!this.nodeMap[t]){var n=new v(t,e);this.nodes.push(n),this.nodeMap[t]=n,this.nodeLabelMap[e]||(this.nodeLabelMap[e]=[]),this.nodeLabelMap[e].push(t)}},t.prototype.addEdge=function(t,e,n,i){if((this.edgeIdAutoIncrease||void 0===t)&&(t=this.counter++),!this.nodeMap[e]||!this.nodeMap[n]||!this.nodeMap[n].edgeMap[t]){var r=new g(t,e,n,i);if(this.edges.push(r),this.edgeMap[t]=r,this.nodeMap[e].addEdge(r),this.edgeLabelMap[i]||(this.edgeLabelMap[i]=[]),this.edgeLabelMap[i].push(r),!this.directed){var o=new g(t,n,e,i);this.nodeMap[n].addEdge(o),this.edgeLabelMap[i].push(o)}}},t}(),x=function(){function t(t,e,n,i,r){this.fromNode=t,this.toNode=e,this.nodeEdgeNodeLabel={nodeLabel1:n||"-1",edgeLabel:i||"-1",nodeLabel2:r||"-1"}}return t.prototype.equalTo=function(t){return this.fromNode===t.formNode&&this.toNode===t.toNode&&this.nodeEdgeNodeLabel===t.nodeEdgeNodeLabel},t.prototype.notEqualTo=function(t){return!this.equalTo(t)},t}(),m=function(){function t(){this.rmpath=[],this.dfsEdgeList=[]}return t.prototype.equalTo=function(t){var e=this.dfsEdgeList.length;if(e!==t.length)return!1;for(var n=0;n<e;n++)if(this.dfsEdgeList[n]!==t[n])return!1;return!0},t.prototype.notEqualTo=function(t){return!this.equalTo(t)},t.prototype.pushBack=function(t,e,n,i,r){return this.dfsEdgeList.push(new x(t,e,n,i,r)),this.dfsEdgeList},t.prototype.toGraph=function(t,e){void 0===t&&(t=-1),void 0===e&&(e=!1);var n=new b(t,!0,e);return this.dfsEdgeList.forEach(function(t){var e=t.fromNode,i=t.toNode,r=t.nodeEdgeNodeLabel,o=r.nodeLabel1,a=r.edgeLabel,s=r.nodeLabel2;"-1"!==o&&n.addNode(e,o),"-1"!==s&&n.addNode(i,s),"-1"!==o&&s!==o&&n.addEdge(void 0,e,i,a)}),n},t.prototype.buildRmpath=function(){this.rmpath=[];for(var t=void 0,e=this.dfsEdgeList.length,n=e-1;n>=0;n--){var i=this.dfsEdgeList[n],r=i.fromNode,o=i.toNode;r<o&&(void 0===t||o===t)&&(this.rmpath.push(n),t=r)}return this.rmpath},t.prototype.getNodeNum=function(){var t={};return this.dfsEdgeList.forEach(function(e){t[e.fromNode]||(t[e.fromNode]=!0),t[e.toNode]||(t[e.toNode]=!0)}),Object.keys(t).length},t}(),w=function(){function t(t){if(this.his={},this.nodesUsed={},this.edgesUsed={},this.edges=[],t){for(;t;){var e=t.edge;this.edges.push(e),this.nodesUsed[e.from]=1,this.nodesUsed[e.to]=1,this.edgesUsed[e.id]=1,t=t.preNode}this.edges=this.edges.reverse()}}return t.prototype.hasNode=function(t){return 1===this.nodesUsed[t.id]},t.prototype.hasEdge=function(t){return 1===this.edgesUsed[t.id]},t}();!function(){function t(t){var e=t.graphs,n=t.minSupport,i=t.minNodeNum,r=t.maxNodeNum,o=t.top,a=t.directed,s=t.verbose;this.graphs=e,this.dfsCode=new m,this.support=0,this.frequentSize1Subgraphs=[],this.frequentSubgraphs=[],this.minSupport=void 0===n?2:n,this.top=void 0===o?10:o,this.directed=void 0!==a&&a,this.counter=0,this.maxNodeNum=void 0===r?4:r,this.minNodeNum=void 0===i?1:i,this.verbose=void 0!==s&&s,this.maxNodeNum<this.minNodeNum&&(this.maxNodeNum=this.minNodeNum),this.reportDF=[]}t.prototype.findForwardRootEdges=function(t,e){var n=this,i=[],r=t.nodeMap;return e.edges.forEach(function(t){(n.directed||e.label<=r[t.to].label)&&i.push(t)}),i},t.prototype.findBackwardEdge=function(t,e,n,i){if(!this.directed&&e===n)return null;for(var r=t.nodeMap,o=r[n.to].edges,a=o.length,s=0;s<a;s++){var h=o[s];if(!i.hasEdge(h)&&h.to===e.from){if(this.directed){if(r[e.from].label<r[n.to].label||r[e.from].label===r[n.to].label&&e.label<=h.label)return h}else if(e.label<h.label||e.label===h.label&&r[e.to].label<=r[n.to].label)return h}}return null},t.prototype.findForwardPureEdges=function(t,e,n,i){for(var r=[],o=e.to,a=t.nodeMap[o].edges,s=a.length,h=0;h<s;h++){var l=a[h],u=t.nodeMap[l.to];n<=u.label&&!i.hasNode(u)&&r.push(l)}return r},t.prototype.findForwardRmpathEdges=function(t,e,n,i){for(var r=[],o=t.nodeMap,a=o[e.to].label,s=o[e.from].edges,h=s.length,l=0;l<h;l++){var u=s[l],c=o[u.to].label;!(e.to===u.to||n>c||i.hasNode(o[u.to]))&&(e.label<u.label||e.label===u.label&&a<=c)&&r.push(u)}return r},t.prototype.getSupport=function(t){var e={};return t.forEach(function(t){e[t.graphId]||(e[t.graphId]=!0)}),Object.keys(e).length},t.prototype.findMinLabel=function(t){var e=void 0;return Object.keys(t).forEach(function(n){var i=t[n],r=i.nodeLabel1,o=i.edgeLabel,a=i.nodeLabel2;if(!e){e={nodeLabel1:r,edgeLabel:o,nodeLabel2:a};return}(r<e.nodeLabel1||r===e.nodeLabel1&&o<e.edgeLabel||r===e.nodeLabel1&&o===e.edgeLabel&&a<e.nodeLabel2)&&(e={nodeLabel1:r,edgeLabel:o,nodeLabel2:a})}),e},t.prototype.isMin=function(){var t=this,e=this.dfsCode;if(this.verbose&&console.log("isMin checking",e),1===e.dfsEdgeList.length)return!0;var n=this.directed,i=e.toGraph(-1,n),r=i.nodeMap,o=new m,a={};i.nodes.forEach(function(e){t.findForwardRootEdges(i,e).forEach(function(t){var n=r[t.to],o="".concat(e.label,"-").concat(t.label,"-").concat(n.label);a[o]||(a[o]={projected:[],nodeLabel1:e.label,edgeLabel:t.label,nodeLabel2:n.label});var s={graphId:i.id,edge:t,preNode:null};a[o].projected.push(s)})});var s=this.findMinLabel(a);if(s)return o.dfsEdgeList.push(new x(0,1,s.nodeLabel1,s.edgeLabel,s.nodeLabel2)),function a(s){for(var h=o.buildRmpath(),l=o.dfsEdgeList[0].nodeEdgeNodeLabel.nodeLabel1,u=o.dfsEdgeList[h[0]].toNode,c={},d=!1,p=0,f=n?-1:0,y=function(e){if(d)return"break";s.forEach(function(n){var r=new w(n),a=t.findBackwardEdge(i,r.edges[h[e]],r.edges[h[0]],r);a&&(c[a.label]||(c[a.label]={projected:[],edgeLabel:a.label}),c[a.label].projected.push({graphId:i.id,edge:c,preNode:n}),p=o.dfsEdgeList[h[e]].fromNode,d=!0)})},g=h.length-1;g>f&&"break"!==y(g);g--);if(d){var v=t.findMinLabel(c);o.dfsEdgeList.push(new x(u,p,"-1",v.edgeLabel,"-1"));var b=o.dfsEdgeList.length-1;return t.dfsCode.dfsEdgeList[b]===o.dfsEdgeList[b]&&a(c[v.edgeLabel].projected)}var m={};d=!1;var E=0;s.forEach(function(e){var n=new w(e),o=t.findForwardPureEdges(i,n.edges[h[0]],l,n);o.length>0&&(d=!0,E=u,o.forEach(function(t){var n="".concat(t.label,"-").concat(r[t.to].label);m[n]||(m[n]={projected:[],edgeLabel:t.label,nodeLabel2:r[t.to].label}),m[n].projected.push({graphId:i.id,edge:t,preNode:e})}))});for(var M=h.length,g=0;g<M&&"break"!==function(e){if(d)return"break";var n=h[e];s.forEach(function(e){var a=new w(e),s=t.findForwardRmpathEdges(i,a.edges[n],l,a);s.length>0&&(d=!0,E=o.dfsEdgeList[n].fromNode,s.forEach(function(t){var n="".concat(t.label,"-").concat(r[t.to].label);m[n]||(m[n]={projected:[],edgeLabel:t.label,nodeLabel2:r[t.to].label}),m[n].projected.push({graphId:i.id,edge:t,preNode:e})}))})}(g);g++);if(!d)return!0;var L=t.findMinLabel(m);o.dfsEdgeList.push(new x(E,u+1,"-1",L.edgeLabel,L.nodeLabel2));var k=o.dfsEdgeList.length-1;return e.dfsEdgeList[k]===o.dfsEdgeList[k]&&a(m["".concat(L.edgeLabel,"-").concat(L.nodeLabel2)].projected)}(a["".concat(s.nodeLabel1,"-").concat(s.edgeLabel,"-").concat(s.nodeLabel2)].projected)},t.prototype.report=function(){if(!(this.dfsCode.getNodeNum()<this.minNodeNum)){this.counter++;var t=this.dfsCode.toGraph(this.counter,this.directed);this.frequentSubgraphs.push((0,u.d9)(t))}},t.prototype.subGraphMining=function(t){var e=this;if(!(this.getSupport(t)<this.minSupport)&&this.isMin()){this.report();var n=this.dfsCode.getNodeNum(),i=this.dfsCode.buildRmpath(),r=this.dfsCode.dfsEdgeList[i[0]].toNode,o=this.dfsCode.dfsEdgeList[0].nodeEdgeNodeLabel.nodeLabel1,a={},s={};t.forEach(function(t){for(var h=e.graphs[t.graphId],l=h.nodeMap,u=new w(t),c=i.length-1;c>=0;c--){var d=e.findBackwardEdge(h,u.edges[i[c]],u.edges[i[0]],u);if(d){var p="".concat(e.dfsCode.dfsEdgeList[i[c]].fromNode,"-").concat(d.label);s[p]||(s[p]={projected:[],toNodeId:e.dfsCode.dfsEdgeList[i[c]].fromNode,edgeLabel:d.label}),s[p].projected.push({graphId:t.graphId,edge:d,preNode:t})}}if(!(n>=e.maxNodeNum)){e.findForwardPureEdges(h,u.edges[i[0]],o,u).forEach(function(e){var n="".concat(r,"-").concat(e.label,"-").concat(l[e.to].label);a[n]||(a[n]={projected:[],fromNodeId:r,edgeLabel:e.label,nodeLabel2:l[e.to].label}),a[n].projected.push({graphId:t.graphId,edge:e,preNode:t})});for(var f=function(n){e.findForwardRmpathEdges(h,u.edges[i[n]],o,u).forEach(function(r){var o="".concat(e.dfsCode.dfsEdgeList[i[n]].fromNode,"-").concat(r.label,"-").concat(l[r.to].label);a[o]||(a[o]={projected:[],fromNodeId:e.dfsCode.dfsEdgeList[i[n]].fromNode,edgeLabel:r.label,nodeLabel2:l[r.to].label}),a[o].projected.push({graphId:t.graphId,edge:r,preNode:t})})},c=0;c<i.length;c++)f(c)}}),Object.keys(s).forEach(function(t){var n=s[t],i=n.toNodeId,o=n.edgeLabel;e.dfsCode.dfsEdgeList.push(new x(r,i,"-1",o,"-1")),e.subGraphMining(s[t].projected),e.dfsCode.dfsEdgeList.pop()}),Object.keys(a).forEach(function(t){var n=a[t],i=n.fromNodeId,o=n.edgeLabel,s=n.nodeLabel2;e.dfsCode.dfsEdgeList.push(new x(i,r+1,"-1",o,s)),e.subGraphMining(a[t].projected),e.dfsCode.dfsEdgeList.pop()})}},t.prototype.generate1EdgeFrequentSubGraphs=function(){var t=this.graphs,e=this.directed,n=this.minSupport,i=this.frequentSize1Subgraphs,r={},o={},a={},s={};return Object.keys(t).forEach(function(n){var i=t[n],h=i.nodeMap;i.nodes.forEach(function(t,i){var l=t.label,u="".concat(n,"-").concat(l);if(!a[u]){var c=r[l]||0;c++,r[l]=c}a[u]={graphKey:n,label:l},t.edges.forEach(function(t){var i=l,r=h[t.to].label;if(!e&&i>r){var a=r;r=i,i=a}var u=t.label,c="".concat(n,"-").concat(i,"-").concat(u,"-").concat(r),d="".concat(i,"-").concat(u,"-").concat(r);if(!o[d]){var p=o[d]||0;p++,o[d]=p}s[c]={graphId:n,nodeLabel1:i,edgeLabel:u,nodeLabel2:r}})})}),Object.keys(r).forEach(function(t){if(!(r[t]<n)){var e={nodes:[],edges:[]};e.nodes.push({id:"0",label:t}),i.push(e)}}),i},t.prototype.run=function(){var t=this;if(this.frequentSize1Subgraphs=this.generate1EdgeFrequentSubGraphs(),!(this.maxNodeNum<2)){var e=this.graphs;this.directed;var n={};Object.keys(e).forEach(function(i){var r=e[i],o=r.nodeMap;r.nodes.forEach(function(e){t.findForwardRootEdges(r,e).forEach(function(t){var r=o[t.to],a="".concat(e.label,"-").concat(t.label,"-").concat(r.label);n[a]||(n[a]={projected:[],nodeLabel1:e.label,edgeLabel:t.label,nodeLabel2:r.label}),n[a].projected.push({graphId:i,edge:t,preNode:null})})})}),Object.keys(n).forEach(function(e){var i=n[e],r=i.projected,o=i.nodeLabel1,a=i.edgeLabel,s=i.nodeLabel2;t.dfsCode.dfsEdgeList.push(new x(0,1,o,a,s)),t.subGraphMining(r),t.dfsCode.dfsEdgeList.pop()})}}}(),function(){function t(t){void 0===t&&(t=10),this.linkedList=new a,this.maxStep=t}Object.defineProperty(t.prototype,"length",{get:function(){return this.linkedList.toArray().length},enumerable:!1,configurable:!0}),t.prototype.isEmpty=function(){return!this.linkedList.head},t.prototype.isMaxStack=function(){return this.toArray().length>=this.maxStep},t.prototype.peek=function(){return this.isEmpty()?null:this.linkedList.head.value},t.prototype.push=function(t){this.linkedList.prepend(t),this.length>this.maxStep&&this.linkedList.deleteTail()},t.prototype.pop=function(){var t=this.linkedList.deleteHead();return t?t.value:null},t.prototype.toArray=function(){return this.linkedList.toArray().map(function(t){return t.value})},t.prototype.clear=function(){for(;!this.isEmpty();)this.pop()}}()},17135:function(t,e,n){"use strict";n.d(e,{s:function(){return _}});var i=n(15767),r=n(63777),o=n(90268),a=n(75341),s=n(56612),h=n(51003),l=n(53105);function u(t,e){var n={YYYY:t.getFullYear(),MM:t.getMonth()+1,DD:t.getDate(),HH:t.getHours(),mm:t.getMinutes(),ss:t.getSeconds()},i=e;return Object.keys(n).forEach(function(t){var e=n[t];i=i.replace(t,"YYYY"===t?"".concat(e):"".concat(e).padStart(2,"0"))}),i}var c=n(77485),d=n(56998),p=n(14473),f=n(73959),y=n(27742),g=n(18313),v=n(68015),b=n(44325),x=function(t){function e(n){var i=t.call(this,(0,s.n)({},e.defaultOptions,n))||this;return i.hoverColor="#f5f5f5",i.selectedColor="#e6f7ff",i.background=i.appendChild(new a.UL({})),i.label=i.background.appendChild(new a.ZA({})),i}return(0,i.ZT)(e,t),Object.defineProperty(e.prototype,"padding",{get:function(){return(0,p.j)(this.style.padding)},enumerable:!1,configurable:!0}),e.prototype.renderLabel=function(){var t=this.style,e=t.label,n=t.value,i=(0,l.zs)(this.attributes,"label");(0,y.Ys)(this.label).maybeAppend(".label",function(){return(0,v.S)(e)}).attr("className","label").styles(i),this.label.attr("__data__",n)},e.prototype.renderBackground=function(){var t=this.label.getBBox(),e=(0,i.CR)(this.padding,4),n=e[0],r=e[1],o=e[2],a=e[3],s=t.width,h=t.height,u=h+n+o,c=(0,l.zs)(this.attributes,"background"),d=this.style,p=d.width,f=d.height,y=d.selected;this.background.attr((0,i.pi)((0,i.pi)({},c),{width:Math.max(s+a+r,void 0===p?0:p),height:Math.max(u,void 0===f?0:f),fill:y?this.selectedColor:"#fff"})),this.label.attr({transform:"translate(".concat(a,", ").concat((u-h)/2,")")})},e.prototype.render=function(){this.renderLabel(),this.renderBackground()},e.prototype.bindEvents=function(){var t=this;this.addEventListener("pointerenter",function(){t.style.selected||t.background.attr("fill",t.hoverColor)}),this.addEventListener("pointerleave",function(){t.style.selected||t.background.attr("fill",t.style.backgroundFill)});var e=this;this.addEventListener("click",function(){var n=t.style,i=n.label,r=n.value,o=n.onClick;null==o||o(r,{label:i,value:r},e)})},e.defaultOptions={style:{value:"",label:"",cursor:"pointer"}},e}(o.w),m=function(t){function e(n){var i,r,o=t.call(this,(0,s.n)({},e.defaultOptions,n))||this;o.currentValue=null===(i=e.defaultOptions.style)||void 0===i?void 0:i.defaultValue,o.isPointerInSelect=!1,o.select=o.appendChild(new a.UL({className:"select",style:{cursor:"pointer",width:0,height:0}})),o.dropdown=o.appendChild(new a.UL({className:"dropdown"}));var h=o.style.defaultValue;return h&&(null===(r=o.style.options)||void 0===r?void 0:r.some(function(t){return t.value===h}))&&(o.currentValue=h),o}return(0,i.ZT)(e,t),e.prototype.setValue=function(t){this.currentValue=t,this.render()},e.prototype.getValue=function(){return this.currentValue},Object.defineProperty(e.prototype,"dropdownPadding",{get:function(){return(0,p.j)(this.style.dropdownPadding)},enumerable:!1,configurable:!0}),e.prototype.renderSelect=function(){var t,e=this,n=this.style,r=n.x,o=n.y,a=n.width,s=n.height,h=n.bordered,u=n.showDropdownIcon,c=(0,l.zs)(this.attributes,"select"),d=(0,l.zs)(this.attributes,"placeholder");this.select.attr((0,i.pi)((0,i.pi)({x:r,y:o,width:a,height:s},c),{fill:"#fff",strokeWidth:h?1:0}));var p=this.dropdownPadding;u&&(0,y.Ys)(this.select).maybeAppend(".dropdown-icon","path").style("d","M-5,-3.5 L0,3.5 L5,-3.5").style("transform","translate(".concat(r+a-10-p[1]-p[3],", ").concat(o+s/2,")")).style("lineWidth",1).style("stroke",this.select.style.stroke);var f=null===(t=this.style.options)||void 0===t?void 0:t.find(function(t){return t.value===e.currentValue}),g=(0,i.pi)({x:r+p[3]},d);(0,y.Ys)(this.select).selectAll(".placeholder").data(f?[]:[1]).join(function(t){return t.append("text").attr("className","placeholder").styles(g).style("y",function(){return o+(s-this.getBBox().height)/2})},function(t){return t.styles(g)},function(t){return t.remove()});var b=(0,l.zs)(this.attributes,"optionLabel"),x=(0,i.pi)({x:r+p[3]},b);(0,y.Ys)(this.select).selectAll(".value").data(f?[f]:[]).join(function(t){return t.append(function(t){return(0,v.S)(t.label)}).attr("className","value").styles(x).style("y",function(){return o+(s-this.getBBox().height)/2})},function(t){return t.styles(x)},function(t){return t.remove()})},e.prototype.renderDropdown=function(){var t,e,n=this,r=this.style,o=r.x,s=r.y,h=r.width,u=r.height,c=r.options,d=r.onSelect,p=r.open,f=(0,l.zs)(this.attributes,"dropdown"),g=(0,l.zs)(this.attributes,"option"),v=this.dropdownPadding;(0,y.Ys)(this.dropdown).maybeAppend(".dropdown-container","g").attr("className","dropdown-container").selectAll(".dropdown-item").data(c,function(t){return t.value}).join(function(t){return t.append(function(t){return new x({className:"dropdown-item",style:(0,i.pi)((0,i.pi)((0,i.pi)({},t),g),{width:h-v[1]-v[3],selected:t.value===n.currentValue,onClick:function(t,e,i){n.setValue(t),null==d||d(t,e,i),n.dispatchEvent(new a.Aw("change",{detail:{value:t,option:e,item:i}})),(0,b.Cp)(n.dropdown)}})})}).each(function(t,e){var n,i=(null===(n=this.parentNode)||void 0===n?void 0:n.children).reduce(function(t,n,i){return i<e&&(t+=n.getBBox().height),t},0);this.attr("transform","translate(".concat(v[3],", ").concat(v[0]+i,")"))})},function(t){return t.update(function(t){return{selected:t.value===n.currentValue}})},function(t){return t.remove()});var m=null===(e=null===(t=this.dropdown.getElementsByClassName("dropdown-container"))||void 0===t?void 0:t[0])||void 0===e?void 0:e.getBBox(),w=f.spacing;this.dropdown.attr((0,i.pi)({transform:"translate(".concat(o,", ").concat(s+u+w,")"),width:m.width+v[1]+v[3],height:m.height+v[0]+v[2]},f)),p||(0,b.Cp)(this.dropdown)},e.prototype.render=function(){this.renderSelect(),this.renderDropdown()},e.prototype.bindEvents=function(){var t=this;this.addEventListener("click",function(t){t.stopPropagation()}),this.select.addEventListener("click",function(){"visible"===t.dropdown.style.visibility?(0,b.Cp)(t.dropdown):(0,b.$Z)(t.dropdown)}),this.addEventListener("pointerenter",function(){t.isPointerInSelect=!0}),this.addEventListener("pointerleave",function(){t.isPointerInSelect=!1}),null==document||document.addEventListener("click",function(){t.isPointerInSelect||(0,b.Cp)(t.dropdown)})},e.defaultOptions={style:{x:0,y:0,width:140,height:32,options:[],bordered:!0,defaultValue:"",selectRadius:8,selectStroke:"#d9d9d9",showDropdownIcon:!0,placeholderText:"请选择",placeholderFontSize:12,placeholderTextBaseline:"top",placeholderFill:"#c2c2c2",dropdownFill:"#fff",dropdownStroke:"#d9d9d9",dropdownRadius:8,dropdownShadowBlur:4,dropdownShadowColor:"rgba(0, 0, 0, 0.08)",dropdownPadding:8,dropdownSpacing:10,optionPadding:[8,12],optionFontSize:12,optionTextBaseline:"top",optionBackgroundFill:"#fff",optionBackgroundRadius:4,optionLabelFontSize:12,optionLabelTextBaseline:"top"}},e}(o.w),w=function(t){function e(n){var i=t.call(this,(0,s.n)({},{style:{backgroundOpacity:e.backgroundOpacities.default}},e.defaultOptions,n))||this;return i.showBackground=!0,i.background=i.appendChild(new a.UL({})),i.icon=i.appendChild(new a.ZA({})),i}return(0,i.ZT)(e,t),Object.defineProperty(e.prototype,"label",{get:function(){return"BaseIcon"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lineWidth",{get:function(){return Math.log10(this.attributes.size)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"padding",{get:function(){return(0,p.j)(this.attributes.size/5)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"iconSize",{get:function(){var t=this.attributes.size,e=(0,i.CR)(this.padding,4),n=e[0],r=e[1],o=e[2];return Math.max(t-Math.max(e[3]+r,n+o),2*this.lineWidth+1)},enumerable:!1,configurable:!0}),e.prototype.renderBackground=function(){var t=this.attributes,e=t.x,n=t.y,r=t.size,o=r/2,a=(0,l.zs)(this.attributes,"background");this.background.attr((0,i.pi)({x:e-o,y:n-o,width:r,height:r},a))},e.prototype.showIndicator=function(){if(this.label){var t=this.attributes.size,e=this.background.getBBox(),n=e.x,i=e.y;this.indicator.update({x:n+t/2,y:i-5,labelText:this.label,visibility:"visible"})}},e.prototype.hideIndicator=function(){this.indicator.update({visibility:"hidden"})},e.prototype.connectedCallback=function(){t.prototype.connectedCallback.call(this);var e,n=this.attributes.size,i=this.background.getBBox(),r=i.x,o=i.y,a=null===(e=this.ownerDocument)||void 0===e?void 0:e.defaultView;a&&(this.indicator=a.appendChild(new g.z({style:{x:r+n/2,y:o-n/2,visibility:"hidden",position:"top",radius:3,zIndex:100}})))},e.prototype.disconnectedCallback=function(){this.indicator.destroy()},e.prototype.render=function(){this.renderIcon(),this.showBackground&&this.renderBackground()},e.prototype.bindEvents=function(){var t=this,n=this.attributes.onClick;if(this.addEventListener("click",function(){null==n||n(t)}),this.showBackground){var i=function(){return t.background.attr({opacity:e.backgroundOpacities.default})};this.addEventListener("pointerenter",function(){t.background.attr({opacity:e.backgroundOpacities.hover}),t.showIndicator()}),this.addEventListener("pointerleave",function(){i(),t.hideIndicator()}),this.addEventListener("pointerdown",function(){t.background.attr({opacity:e.backgroundOpacities.active})}),this.addEventListener("pointerup",function(){i()})}},e.tag="IconBase",e.defaultOptions={style:{x:0,y:0,size:10,color:"#565758",backgroundRadius:4,backgroundFill:"#e2e2e2"}},e.backgroundOpacities={default:0,hover:.8,active:1},e}(o.w),E=function(t,e){return void 0===e&&(e="#565758"),new a.y$({style:{fill:e,d:"M ".concat(t,",").concat(t," L -").concat(t,",0 L ").concat(t,",-").concat(t," Z"),transformOrigin:"center"}})},M=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,i.ZT)(e,t),e.prototype.arcPath=function(t,e,n){var r=(0,i.CR)([n,n],2),o=r[0],a=r[1],s=function(i){return[t+n*Math.cos(i),e+n*Math.sin(i)]},h=(0,i.CR)(s(-5/4*Math.PI),2),l=h[0],u=h[1],c=(0,i.CR)(s(1/4*Math.PI),2),d=c[0],p=c[1];return"M".concat(l,",").concat(u,",A").concat(o,",").concat(a,",0,1,1,").concat(d,",").concat(p)},Object.defineProperty(e.prototype,"label",{get:function(){return"重置"},enumerable:!1,configurable:!0}),e.prototype.renderIcon=function(){var t=this.attributes,e=t.x,n=t.y,i=t.color,r=this.iconSize,o=this.lineWidth,a=o+.5;(0,y.Ys)(this.icon).maybeAppend(".reset","path").styles({stroke:i,lineWidth:o,d:this.arcPath(e,n,r/2-o),markerStart:E(a,i)})},e}(w),L=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,i.ZT)(e,t),Object.defineProperty(e.prototype,"label",{get:function(){return"快退"},enumerable:!1,configurable:!0}),e.prototype.renderIcon=function(){var t=this.attributes,e=t.x,n=t.y,i=t.color,r=this.iconSize,o=r/2,a=r/2/1.7320508075688772;(0,y.Ys)(this.icon).maybeAppend(".backward","polygon").styles({points:[[e,n],[e,n-a],[e-o,n],[e,n+a],[e,n],[e+o,n-a],[e+o,n+a],[e,n]],fill:i})},e}(w),k=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,i.ZT)(e,t),Object.defineProperty(e.prototype,"label",{get:function(){return"快进"},enumerable:!1,configurable:!0}),e.prototype.renderIcon=function(){var t=this.attributes,e=t.x,n=t.y,i=t.color,r=this.iconSize,o=r/2,a=r/2/1.7320508075688772;(0,y.Ys)(this.icon).maybeAppend(".forward","polygon").styles({points:[[e,n],[e,n-a],[e+o,n],[e,n+a],[e,n],[e-o,n-a],[e-o,n+a],[e,n]],fill:i})},e}(w),S=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,i.ZT)(e,t),Object.defineProperty(e.prototype,"label",{get:function(){return"播放"},enumerable:!1,configurable:!0}),e.prototype.renderIcon=function(){var t=this.attributes,e=t.x,n=t.y,i=t.color,r=this.iconSize,o=r/3*1.3856406460551018;(0,y.Ys)(this.icon).maybeAppend(".play","polygon").styles({points:[[e+o,n],[e-o/2,n-r/2*.8],[e-o/2,n+r/2*.8],[e+o,n]],fill:i})},e}(w),N=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,i.ZT)(e,t),Object.defineProperty(e.prototype,"label",{get:function(){return"暂停"},enumerable:!1,configurable:!0}),e.prototype.renderIcon=function(){var t=this.attributes,e=t.x,n=t.y,i=t.color,r=this.iconSize,o=r/3;(0,y.Ys)(this.icon).maybeAppend(".pause","polygon").styles({points:[[e-o,n-r/2],[e-o,n+r/2],[e-o/2,n+r/2],[e-o/2,n-r/2],[e-o,n-r/2],[e+o/2,n-r/2],[e+o/2,n+r/2],[e+o,n+r/2],[e+o,n-r/2]],fill:i})},e}(w),T=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,i.ZT)(e,t),Object.defineProperty(e.prototype,"label",{get:function(){return"范围时间"},enumerable:!1,configurable:!0}),e.prototype.renderIcon=function(){var t=this.attributes,e=t.x,n=t.y,i=t.color,r=this.iconSize,o=this.lineWidth;(0,y.Ys)(this.icon).maybeAppend(".left-line","line").styles({x1:e-r/2,y1:n-r/2,x2:e-r/2,y2:n+r/2,stroke:i,lineWidth:o}),(0,y.Ys)(this.icon).maybeAppend(".right-line","line").styles({x1:e+r/2,y1:n-r/2,x2:e+r/2,y2:n+r/2,stroke:i,lineWidth:o}),(0,y.Ys)(this.icon).maybeAppend(".left-arrow","line").styles({x1:e,y1:n,x2:e-r/2+2*o,y2:n,stroke:i,lineWidth:o,markerEnd:E(2*o,i)}),(0,y.Ys)(this.icon).maybeAppend(".right-arrow","line").styles({x1:e,y1:n,x2:e+r/2-2*o,y2:n,stroke:i,lineWidth:o,markerEnd:E(2*o,i)})},e}(w),O=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,i.ZT)(e,t),Object.defineProperty(e.prototype,"label",{get:function(){return"单一时间"},enumerable:!1,configurable:!0}),e.prototype.renderIcon=function(){var t=this.attributes,e=t.x,n=t.y,i=t.color,r=this.iconSize,o=this.lineWidth;(0,y.Ys)(this.icon).maybeAppend(".line","line").styles({x1:e,y1:n-r/2,x2:e,y2:n+r/2,stroke:i,lineWidth:o}),(0,y.Ys)(this.icon).maybeAppend(".left-arrow","line").styles({x1:e-r/2-2*o,y1:n,x2:e-2*o,y2:n,stroke:i,lineWidth:o,markerEnd:E(2*o,i)}),(0,y.Ys)(this.icon).maybeAppend(".right-arrow","line").styles({x1:e+r/2+2*o,y1:n,x2:e+2*o,y2:n,stroke:i,lineWidth:o,markerEnd:E(2*o,i)})},e}(w),I=function(t){return[[-t/2,-t/2],[-t/2,t/2],[t/2,t/2]]},P=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,i.ZT)(e,t),Object.defineProperty(e.prototype,"label",{get:function(){return"折线图"},enumerable:!1,configurable:!0}),e.prototype.renderIcon=function(){var t=this.attributes,e=t.x,n=t.y,r=t.color,o=this.iconSize,a=this.lineWidth,s=(o-2*a-a)/4,h=(o-2*a-a)/2,l=(0,i.CR)([e-o/2+a,n+o/2-2*a],2),u=l[0],c=l[1];(0,y.Ys)(this.icon).maybeAppend(".coordinate","polyline").styles({points:I(o).map(function(t){var r=(0,i.CR)(t,2);return[r[0]+e,r[1]+n]}),stroke:r,lineWidth:a}),(0,y.Ys)(this.icon).maybeAppend(".line","polyline").styles({points:[[u,c],[u+s,c-h],[u+2*s,c],[u+4*s,c-2*h]],stroke:r,lineWidth:a})},e}(w),C=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,i.ZT)(e,t),Object.defineProperty(e.prototype,"label",{get:function(){return"条形图"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"data",{get:function(){return[1,4,2,4,3]},enumerable:!1,configurable:!0}),e.prototype.renderIcon=function(){var t=this.data,e=this.attributes,n=e.x,r=e.y,o=e.color,a=this.iconSize,s=this.lineWidth,h=(a-s)/t.length,l=(a-2*s)/4,u=(0,i.CR)([n-a/2+2*s,r+a/2-s],2),c=u[0],d=u[1];(0,y.Ys)(this.icon).maybeAppend(".coordinate","polyline").styles({points:I(a).map(function(t){var e=(0,i.CR)(t,2);return[e[0]+n,e[1]+r]}),stroke:o,lineWidth:s}),(0,y.Ys)(this.icon).maybeAppend(".bars","g").selectAll(".column").data(this.data.map(function(t,e){return{value:t,index:e}})).join(function(t){return t.append("line").attr("className","column").style("x1",function(t){return c+h*t.index}).style("y1",d).style("x2",function(t){return c+h*t.index}).style("y2",function(t){return d-l*t.value}).styles({y1:d,stroke:o,lineWidth:s})})},e}(w),j=function(t){function e(e){var n=t.call(this,(0,s.n)({},{style:{color:"#d8d9d9"}},e))||this;return n.showBackground=!1,n}return(0,i.ZT)(e,t),e.prototype.renderIcon=function(){var t=this.attributes,e=t.x,n=t.y,i=t.color,r=this.iconSize,o=this.lineWidth;(0,y.Ys)(this.icon).maybeAppend(".split","line").styles({x1:e,y1:n-r/2,x2:e,y2:n+r/2,stroke:i,lineWidth:o})},e}(w),A=function(t){function e(){var e=t.apply(this,(0,i.ev)([],(0,i.CR)(arguments),!1))||this;return e.showBackground=!1,e}return(0,i.ZT)(e,t),Object.defineProperty(e.prototype,"padding",{get:function(){return(0,p.j)(0)},enumerable:!1,configurable:!0}),e.prototype.renderIcon=function(){var t=this.iconSize,e=this.attributes,n=e.x,o=e.y,a=e.speed,s=(0,f.Z)(this.attributes,["x","y","transform","transformOrigin","width","height","size","color","speed"]),h=(0,r.Z)(t,20,1/0),l=(0,i.pi)((0,i.pi)({},s),{x:n-h/2,y:o-10,width:h,height:20,defaultValue:void 0===a?1:a,bordered:!1,showDropdownIcon:!1,selectRadius:2,dropdownPadding:this.padding,dropdownRadius:2,dropdownSpacing:t/5,placeholderFontSize:t/2,optionPadding:0,optionLabelFontSize:t/2,optionBackgroundRadius:1,options:[{label:"1x",value:1},{label:"1.5x",value:1.5},{label:"2x",value:2}]});(0,y.Ys)(this.icon).maybeAppend(".speed",function(){return new m({style:l})}).attr("className","speed").each(function(){this.update(l)})},e.tag="SpeedSelect",e}(w),R=function(t){function e(e){var n=t.call(this,e)||this;return n.icon=n.appendChild(new a.ZA({})),n.currentType=n.attributes.type,n}return(0,i.ZT)(e,t),e.prototype.getType=function(){return this.currentType},e.prototype.render=function(){var t=this,e=this.attributes,n=(e.onChange,(0,i._T)(e,["onChange"]));(0,y.Ys)(this.icon).selectAll(".icon").data([this.currentType]).join(function(e){return e.append(function(e){var n,r=null===(n=t.toggles.find(function(t){return(0,i.CR)(t,1)[0]===e}))||void 0===n?void 0:n[1];if(!r)throw Error("Invalid type: ".concat(e));return new r({})}).attr("className","icon").styles(n,!1).update({})},function(t){return t.styles({restStyles:n}).update({})},function(t){return t.remove()})},e.prototype.bindEvents=function(){var t=this,e=this.attributes.onChange;this.addEventListener("click",function(n){n.preventDefault(),n.stopPropagation();var r=(t.toggles.findIndex(function(e){return(0,i.CR)(e,1)[0]===t.currentType})+1)%t.toggles.length,o=t.toggles[r][0];null==e||e(t.currentType),t.currentType=o,t.render()})},e.tag="ToggleIcon",e}(o.w),B=function(t){function e(e){var n=t.call(this,(0,s.n)({},{style:{type:"play"}},e))||this;return n.toggles=[["play",S],["pause",N]],n}return(0,i.ZT)(e,t),e}(R),Y=function(t){function e(e){var n=t.call(this,(0,s.n)({},{style:{type:"range"}},e))||this;return n.toggles=[["range",T],["value",O]],n}return(0,i.ZT)(e,t),e}(R),F=function(t){function e(e){var n=t.call(this,(0,s.n)({},{style:{type:"column"}},e))||this;return n.toggles=[["line",P],["column",C]],n}return(0,i.ZT)(e,t),e}(R),z={reset:M,speed:A,backward:L,playPause:B,forward:k,selectionType:Y,chartType:F,split:j},H=function(t){function e(n){var i=t.call(this,(0,s.n)({},e.defaultOptions,n))||this;return i.background=i.appendChild(new a.UL({})),i.functions=i.appendChild(new a.ZA({})),i}return(0,i.ZT)(e,t),Object.defineProperty(e.prototype,"padding",{get:function(){return(0,p.j)(this.attributes.padding)},enumerable:!1,configurable:!0}),e.prototype.renderBackground=function(){var t=this.style,e=t.x,n=t.y,r=t.width,o=t.height,a=(0,l.zs)(this.attributes,"background");this.background.attr((0,i.pi)({x:e,y:n,width:r,height:o},a))},e.prototype.renderFunctions=function(){var t,e=this,n=this.attributes,r=n.functions,o=n.iconSize,a=n.iconSpacing,s=n.x,h=n.y,l=n.width,u=n.height,c=n.align,d=(0,i.CR)(this.padding,4),p=d[1],f=d[3],y=r.reduce(function(t,e){return t.length&&e.length?t.concat.apply(t,(0,i.ev)(["split"],(0,i.CR)(e),!1)):t.concat.apply(t,(0,i.ev)([],(0,i.CR)(e),!1))},[]),g=y.length*(o+a)-a,v={left:f+o/2,center:(l-g)/2+o/2,right:l-g-f-p+o/2}[c]||0;null===(t=this.speedSelect)||void 0===t||t.destroy(),this.functions.removeChildren(),y.forEach(function(t,n){var r,l=z[t],c={x:s+n*(o+a)+v,y:h+u/2,size:o};if(l===A?(c.speed=e.attributes.speed,c.onSelect=function(n){return e.handleFunctionChange(t,{value:n})}):[B,Y,F].includes(l)?(c.onChange=function(n){return e.handleFunctionChange(t,{value:n})},l===B&&(c.type="play"===e.attributes.state?"pause":"play"),l===Y&&(c.type="range"===e.attributes.selectionType?"value":"range"),l===F&&(c.type="line"===e.attributes.chartType?"column":"line")):c.onClick=function(){return e.handleFunctionChange(t,{value:t})},l===A){var d=null===(r=e.ownerDocument)||void 0===r?void 0:r.defaultView;d&&(e.speedSelect=new l({style:(0,i.pi)((0,i.pi)({},c),{zIndex:100})}),d.appendChild(e.speedSelect))}else e.functions.appendChild(new l({style:c}))})},e.prototype.disconnectedCallback=function(){var e;t.prototype.disconnectedCallback.call(this),null===(e=this.speedSelect)||void 0===e||e.destroy()},e.prototype.render=function(){this.renderBackground(),this.renderFunctions()},e.prototype.handleFunctionChange=function(t,e){var n=this.attributes.onChange;null==n||n(t,e)},e.defaultOptions={style:{x:0,y:0,width:300,height:40,padding:0,align:"center",iconSize:25,iconSpacing:0,speed:1,state:"pause",chartType:"line",selectionType:"range",backgroundFill:"#fbfdff",backgroundStroke:"#ebedf0",functions:[["reset","speed"],["backward","playPause","forward"],["selectionType","chartType"]]}},e}(o.w),D=function(t){function e(n){var i=t.call(this,(0,s.n)({},e.defaultOptions,n))||this;return i.bindEvents(),i}return(0,i.ZT)(e,t),e.prototype.bindEvents=function(){var t=this;this.addEventListener("mouseenter",function(){t.attr("lineWidth",Math.ceil(+(t.style.r||0)/2))}),this.addEventListener("mouseleave",function(){t.attr("lineWidth",0)})},e.defaultOptions={style:{r:5,fill:"#3f7cf7",lineWidth:0,stroke:"#3f7cf7",strokeOpacity:.5,cursor:"pointer"}},e}(a.Cd),G=function(t){function e(n){return t.call(this,(0,s.n)({},e.defaultOptions,n))||this}return(0,i.ZT)(e,t),e.prototype.renderBackground=function(){var t=this.attributes,e=t.x,n=t.y,r=t.width,o=t.height,a=(0,l.zs)(this.attributes,"background");(0,y.Ys)(this).maybeAppend("background","rect").attr("className","background").styles((0,i.pi)({x:e-r/2,y:n-o/2,width:r,height:o},a))},e.prototype.renderIcon=function(){var t=this.attributes,e=t.x,n=t.y,r=t.iconSize,o=(0,l.zs)(this.attributes,"icon"),a=r/2;(0,y.Ys)(this).maybeAppend("icon-left-line","line").attr("className","icon-left-line").styles((0,i.pi)({x1:e-1,y1:n-a,x2:e-1,y2:n+a},o)),(0,y.Ys)(this).maybeAppend("icon-right-line","line").attr("className","icon-right-line").styles((0,i.pi)({x1:e+1,y1:n-a,x2:e+1,y2:n+a},o))},e.prototype.renderBorder=function(){var t=this.attributes,e=t.x,n=t.y,r=t.width,o=t.height,a=t.type,s=(0,l.zs)(this.attributes,"border"),h="start"===a?+r/2:-r/2;(0,y.Ys)(this).maybeAppend("border","line").attr("className","border").styles((0,i.pi)({x1:h+e,y1:n-o/2,x2:h+e,y2:n+o/2},s))},e.prototype.render=function(){this.renderBackground(),this.renderIcon(),this.renderBorder()},e.defaultOptions={style:{x:0,y:0,width:10,height:50,iconSize:10,type:"start",backgroundFill:"#fff",backgroundFillOpacity:.5,iconStroke:"#9a9a9a",iconLineWidth:1,borderStroke:"#e8e8e8",borderLineWidth:1}},e}(o.w);function V(t){var e=String(Math.floor(t/3600)).padStart(2,"0"),n=String(Math.floor(t%3600/60)).padStart(2,"0"),i=String(Math.floor(t%60)).padStart(2,"0");return t<3600?"".concat(n,":").concat(i):"".concat(e,":").concat(n,":").concat(i)}var _=function(t){function e(n){var r=t.call(this,(0,s.n)({},e.defaultOptions,n))||this;r.axis=r.appendChild(new c.R({style:{type:"linear",startPos:[0,0],endPos:[0,0],data:[],showArrow:!1,animate:!1}})),r.timeline=r.appendChild(new d.i({style:{onChange:function(t){r.handleSliderChange(t)}}})),r.controller=r.appendChild(new H({})),r.states={},r.handleSliderChange=function(t){var e,n=Array.isArray(e=r.states.values)?(0,i.ev)([],(0,i.CR)(e),!1):e;r.setBySliderValues(t),r.dispatchOnChange(n)};var o=r.attributes,a=o.selectionType,h=o.chartType,l=o.speed,u=o.state,p=o.playMode,f=o.values;return r.states={chartType:h,playMode:p,selectionType:a,speed:l,state:u},r.setByTimebarValues(f),r}return(0,i.ZT)(e,t),Object.defineProperty(e.prototype,"data",{get:function(){return this.attributes.data.sort(function(t,e){return t.time<e.time?-1:t.time>e.time?1:0})},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"space",{get:function(){var t,e=this.attributes,n=e.x,i=e.y,o=e.width,a=e.height,s=e.type,l=e.controllerHeight,u=(0,r.Z)(+a-l,0,+a),c=new h.b(n,i+ +a-l,+o,l),d=0;"chart"===s?(d=35,t=new h.b(n,i+u-d,+o,d)):t=new h.b;var p="time"===s?10:u;return{axisBBox:t,controllerBBox:c,timelineBBox:new h.b(n,i+("time"===s?u:u-p),+o,p-d)}},enumerable:!1,configurable:!0}),e.prototype.setBySliderValues=function(t){var e,n,r=this.data,o=(0,i.CR)(Array.isArray(t)?t:[0,t],2),a=o[0],s=o[1],h=r.length,l=r[Math.floor(a*h)],u=r[Math.ceil(s*h)-(Array.isArray(t)?0:1)];this.states.values=[null!==(e=null==l?void 0:l.time)&&void 0!==e?e:r[0].time,null!==(n=null==u?void 0:u.time)&&void 0!==n?n:1/0]},e.prototype.setByTimebarValues=function(t){var e,n,r,o=this.data,a=(0,i.CR)(Array.isArray(t)?t:[void 0,t],2),s=a[0],h=a[1],l=o.find(function(t){return t.time===s}),u=o.find(function(t){return t.time===h});this.states.values=[null!==(e=null==l?void 0:l.time)&&void 0!==e?e:null===(n=o[0])||void 0===n?void 0:n.time,null!==(r=null==u?void 0:u.time)&&void 0!==r?r:1/0]},e.prototype.setByIndex=function(t){var e,n,r,o,a=this.data,s=(0,i.CR)(t,2),h=s[0],l=s[1];this.states.values=[null!==(n=null===(e=a[h])||void 0===e?void 0:e.time)&&void 0!==n?n:a[0].time,null!==(o=null===(r=this.data[l])||void 0===r?void 0:r.time)&&void 0!==o?o:1/0]},Object.defineProperty(e.prototype,"sliderValues",{get:function(){var t,e=this.states,n=e.values,r=e.selectionType,o=(0,i.CR)(Array.isArray(n)?n:[void 0,n],2),a=o[0],s=o[1],h=this.data,l=h.length,u="value"===r;return[(t=h.findIndex(function(t){return t.time===a}),u?0:t>-1?t/l:0),function(){if(s===1/0)return 1;var t=h.findIndex(function(t){return t.time===s});return t>-1?t/l:u?.5:1}()]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"values",{get:function(){var t=this.states,e=t.values,n=t.selectionType,r=(0,i.CR)(Array.isArray(e)?e:[this.data[0].time,e],2),o=r[0],a=r[1];return"value"===n?a:[o,a]},enumerable:!1,configurable:!0}),e.prototype.getDatumByRatio=function(t){var e=this.data,n=e.length;return e[Math.floor(t*(n-1))]},Object.defineProperty(e.prototype,"chartHandleIconShape",{get:function(){var t=this.states.selectionType,e=this.space.timelineBBox.height;return"range"===t?function(t){return new G({style:{type:t,height:e,iconSize:e/6}})}:function(){return new a.x1({style:{x1:0,y1:-e/2,x2:0,y2:e/2,lineWidth:2,stroke:"#c8c8c8"}})}},enumerable:!1,configurable:!0}),e.prototype.getChartStyle=function(t){var e=this,n=t.x,r=t.y,o=t.width,a=t.height,s=this.states,h=s.selectionType,c=s.chartType,d=this.data,p=this.attributes,f=p.type,y=p.labelFormatter,g=(0,l.zs)(this.attributes,"chart"),v=(g.type,(0,i._T)(g,["type"])),b="range"===h;if("time"===f)return(0,i.pi)({handleIconShape:function(){return new D({})},selectionFill:"#2e7ff8",selectionFillOpacity:1,showLabelOnInteraction:!0,handleLabelDy:b?-15:0,autoFitLabel:b,handleSpacing:b?-15:0,trackFill:"#edeeef",trackLength:o,trackOpacity:.5,trackRadius:a/2,trackSize:a/2,type:h,values:this.sliderValues,formatter:function(t){if(y)return y(t);var n=e.getDatumByRatio(t).time;return"number"==typeof n?V(n):u(n,"YYYY-MM-DD HH:mm:ss")},transform:"translate(".concat(n,", ").concat(r,")"),zIndex:1},v);var x=d.map(function(t){return t.value});return(0,i.pi)({handleIconOffset:"range"===h?5:0,handleIconShape:this.chartHandleIconShape,selectionFill:"#fff",selectionFillOpacity:.5,selectionType:"invert",sparklineSpacing:.1,sparklineColumnLineWidth:0,sparklineColor:"#d4e5fd",sparklineAreaOpacity:1,sparklineAreaLineWidth:0,sparklineData:x,sparklineType:c,sparklineScale:.8,trackLength:o,trackSize:a,type:h,values:this.sliderValues,transform:"translate(".concat(n,", ").concat(r,")"),zIndex:1},v)},e.prototype.renderChart=function(t){void 0===t&&(t=this.space.timelineBBox),this.timeline.update(this.getChartStyle(t))},e.prototype.updateSelection=function(){this.timeline.setValues(this.sliderValues,!0),this.handleSliderChange(this.sliderValues)},e.prototype.getAxisStyle=function(t){var e=this.data,n=this.attributes,r=n.interval,o=n.labelFormatter,a=(0,l.zs)(this.attributes,"axis"),s=t.x,h=t.y,c=t.width,d=(0,i.ev)((0,i.ev)([],(0,i.CR)(e),!1),[{time:0}],!1).map(function(t,e,n){var i=t.time;return{label:"".concat(i),value:e/(n.length-1),time:i}});return(0,i.pi)({startPos:[s,h],endPos:[s+c,h],data:d,labelFilter:function(t,e){return e<d.length-1},labelFormatter:function(t){var e=t.time;return o?o(e):"number"==typeof e?V(e):function(t,e){var n=new Date(t);switch(e){case"half-hour":case"hour":case"four-hour":if([0,6,12,18].includes(n.getHours())&&0===n.getMinutes())return u(n,"HH:mm\nYYYY-MM-DD");return u(n,"HH:mm");case"half-day":if(12>n.getHours())return"AM\n".concat(u(n,"YYYY-MM-DD"));return"PM";case"day":if([1,10,20].includes(n.getDate()))return u(n,"DD\nYYYY-MM");return u(n,"DD");case"week":if(7>=n.getDate())return u(n,"DD\nYYYY-MM");return u(n,"DD");case"month":if([0,6].includes(n.getMonth()))return u(n,"MM月\nYYYY");return u(n,"MM月");case"season":if([0].includes(n.getMonth()))return u(n,"MM月\nYYYY");return u(n,"MM月");case"year":return u(n,"YYYY");default:return u(n,"YYYY-MM-DD HH:mm")}}(e,r)}},a)},e.prototype.renderAxis=function(t){void 0===t&&(t=this.space.axisBBox),"chart"===this.attributes.type&&this.axis.update(this.getAxisStyle(t))},e.prototype.renderController=function(t){void 0===t&&(t=this.space.controllerBBox);var e=this.attributes.type,n=this.states,r=n.state,o=n.speed,a=n.selectionType,s=n.chartType,h=(0,l.zs)(this.attributes,"controller"),u=this,c=(0,i.pi)((0,i.pi)((0,i.pi)({},t),{iconSize:20,speed:o,state:r,selectionType:a,chartType:s,onChange:function(t,e){var n=e.value;switch(t){case"reset":u.internalReset();break;case"speed":u.handleSpeedChange(n);break;case"backward":u.internalBackward();break;case"playPause":"play"===n?u.internalPlay():u.internalPause();break;case"forward":u.internalForward();break;case"selectionType":u.handleSelectionTypeChange(n);break;case"chartType":u.handleChartTypeChange(n)}}}),h);"time"===e&&(c.functions=[["reset","speed"],["backward","playPause","forward"],["selectionType"]]),this.controller.update(c)},e.prototype.dispatchOnChange=function(t){var e=this.data,n=this.attributes.onChange,r=this.states,o=r.values,a=r.selectionType,s=(0,i.CR)(o,2),h=s[0],l=s[1],u=l===1/0?e.at(-1).time:l,c="range"===a?[h,u]:u;(!t||(Array.isArray(t)?!Array.isArray(c)||t[0]!==c[0]||t[1]!==c[1]&&t[1]!==1/0&&c[1]!==1/0:Array.isArray(c)||t!==c))&&null!=n&&n("range"===a?[h,u]:u)},e.prototype.internalReset=function(t){var e,n,i=this.states.selectionType;this.internalPause(),this.setBySliderValues("range"===i?[0,1]:[0,0]),this.renderController(),this.updateSelection(),t||(null===(n=null===(e=this.attributes)||void 0===e?void 0:e.onReset)||void 0===n||n.call(e),this.dispatchOnChange())},e.prototype.reset=function(){this.internalReset()},e.prototype.moveSelection=function(t,e){var n,o,a,s,h,l,u=this.data,c=u.length,d=this.states,p=d.values,f=d.selectionType,y=d.playMode,g=(0,i.CR)(p,2),v=g[0],b=g[1],x=u.findIndex(function(t){return t.time===v}),m=u.findIndex(function(t){return t.time===b});-1===m&&(m=c);var w="backward"===t?-1:1;"range"===f?"acc"===y?(l=[x,m+w],-1===w&&x===m&&(l=[x,c])):l=[x+w,m+w]:l=[x,m+w];var E=(n=l,a=(o=(0,i.CR)(n.sort(function(t,e){return t-e}),2))[0],s=o[1],h=function(t){return(0,r.Z)(t,0,c)},s>c?"value"===f?[0,0]:"acc"===y?[h(a),h(a)]:[0,h(s-a)]:a<0?"acc"===y?[0,h(s)]:[h(a+c-s),c]:[h(a),h(s)]);return this.setByIndex(E),this.updateSelection(),E},e.prototype.internalBackward=function(t){var e,n,i=this.moveSelection("backward",t);return t||(null===(n=null===(e=this.attributes)||void 0===e?void 0:e.onBackward)||void 0===n||n.call(e),this.dispatchOnChange()),i},e.prototype.backward=function(){this.internalBackward()},e.prototype.internalPlay=function(t){var e,n,i=this,r=this.data,o=this.attributes.loop,a=this.states.speed,s=void 0===a?1:a;this.playInterval=window.setInterval(function(){i.internalForward()[1]!==r.length||o||(i.internalPause(),i.renderController())},1e3/s),this.states.state="play",t||null===(n=null===(e=this.attributes)||void 0===e?void 0:e.onPlay)||void 0===n||n.call(e)},e.prototype.play=function(){this.internalPlay()},e.prototype.internalPause=function(t){var e,n;clearInterval(this.playInterval),this.states.state="pause",t||null===(n=null===(e=this.attributes)||void 0===e?void 0:e.onPause)||void 0===n||n.call(e)},e.prototype.pause=function(){this.internalPause()},e.prototype.internalForward=function(t){var e,n,i=this.moveSelection("forward",t);return t||(null===(n=null===(e=this.attributes)||void 0===e?void 0:e.onForward)||void 0===n||n.call(e),this.dispatchOnChange()),i},e.prototype.forward=function(){this.internalForward()},e.prototype.handleSpeedChange=function(t){var e,n;this.states.speed=t,"play"===this.states.state&&(this.internalPause(!0),this.internalPlay(!0)),null===(n=null===(e=this.attributes)||void 0===e?void 0:e.onSpeedChange)||void 0===n||n.call(e,t)},e.prototype.handleSelectionTypeChange=function(t){var e,n;this.states.selectionType=t,this.renderChart(),null===(n=null===(e=this.attributes)||void 0===e?void 0:e.onSelectionTypeChange)||void 0===n||n.call(e,t)},e.prototype.handleChartTypeChange=function(t){var e,n;this.states.chartType=t,this.renderChart(),null===(n=null===(e=this.attributes)||void 0===e?void 0:e.onChartTypeChange)||void 0===n||n.call(e,t)},e.prototype.render=function(){var t=this.space,e=t.axisBBox,n=t.controllerBBox,i=t.timelineBBox;this.renderController(n),this.renderAxis(e),this.renderChart(i),"play"===this.states.state&&this.internalPlay()},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.internalPause(!0)},e.defaultOptions={style:{x:0,y:0,axisLabelFill:"#6e6e6e",axisLabelTextAlign:"left",axisLabelTextBaseline:"top",axisLabelTransform:"translate(5, -12)",axisLineLineWidth:1,axisLineStroke:"#cacdd1",axisTickLength:15,axisTickLineWidth:1,axisTickStroke:"#cacdd1",chartShowLabel:!1,chartType:"line",controllerAlign:"center",controllerHeight:40,data:[],interval:"day",loop:!1,playMode:"acc",selectionType:"range",type:"time"}},e}(o.w)},74355:function(t){"undefined"!=typeof self&&self,t.exports=function(t){var e={};function n(i){if(e[i])return e[i].exports;var r=e[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:i})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=5)}([function(t,e){t.exports={assign:Object.assign,getHeight:function(t,e,n,i){return void 0===i&&(i="height"),"center"===n?(t[i]+e[i])/2:t.height}}},function(t,e,n){var i=n(3),r=function(){function t(t,e){void 0===e&&(e={}),this.options=e,this.rootNode=i(t,e)}return t.prototype.execute=function(){throw Error("please override this method")},t}();t.exports=r},function(t,e,n){var i=n(4),r=["LR","RL","TB","BT","H","V"],o=["LR","RL","H"],a=r[0];t.exports=function(t,e,n){var s=e.direction||a;if(e.isHorizontal=o.indexOf(s)>-1,s&&-1===r.indexOf(s))throw TypeError("Invalid direction: "+s);if(s===r[0])n(t,e);else if(s===r[1])n(t,e),t.right2left();else if(s===r[2])n(t,e);else if(s===r[3])n(t,e),t.bottom2top();else if(s===r[4]||s===r[5]){var h=i(t,e),l=h.left,u=h.right;n(l,e),n(u,e),e.isHorizontal?l.right2left():l.bottom2top(),u.translate(l.x-u.x,l.y-u.y),t.x=l.x,t.y=u.y;var c=t.getBoundingBox();e.isHorizontal?c.top<0&&t.translate(0,-c.top):c.left<0&&t.translate(-c.left,0)}var d=e.fixedRoot;return void 0===d&&(d=!0),d&&t.translate(-(t.x+t.width/2+t.hgap),-(t.y+t.height/2+t.vgap)),function(t,e){if(e.radial){var n=e.isHorizontal?["x","y"]:["y","x"],i=n[0],r=n[1],o={x:1/0,y:1/0},a={x:-1/0,y:-1/0},s=0;t.DFTraverse(function(t){s++;var e=t.x,n=t.y;o.x=Math.min(o.x,e),o.y=Math.min(o.y,n),a.x=Math.max(a.x,e),a.y=Math.max(a.y,n)});var h=a[r]-o[r];if(0!==h){var l=2*Math.PI/s;t.DFTraverse(function(e){var n=(e[r]-o[r])/h*(2*Math.PI-l)+l,a=e[i]-t[i];e.x=Math.cos(n)*a,e.y=Math.sin(n)*a})}}}(t,e),t}},function(t,e,n){var i=n(0),r={getId:function(t){return t.id||t.name},getPreH:function(t){return t.preH||0},getPreV:function(t){return t.preV||0},getHGap:function(t){return t.hgap||18},getVGap:function(t){return t.vgap||18},getChildren:function(t){return t.children},getHeight:function(t){return t.height||36},getWidth:function(t){var e=t.label||" ";return t.width||18*e.split("").length}};function o(t,e){if(this.vgap=this.hgap=0,t instanceof o)return t;this.data=t;var n=e.getHGap(t),i=e.getVGap(t);return this.preH=e.getPreH(t),this.preV=e.getPreV(t),this.width=e.getWidth(t),this.height=e.getHeight(t),this.width+=this.preH,this.height+=this.preV,this.id=e.getId(t),this.x=this.y=0,this.depth=0,this.children||(this.children=[]),this.addGap(n,i),this}i.assign(o.prototype,{isRoot:function(){return 0===this.depth},isLeaf:function(){return 0===this.children.length},addGap:function(t,e){this.hgap+=t,this.vgap+=e,this.width+=2*t,this.height+=2*e},eachNode:function(t){for(var e,n=[this];e=n.shift();)t(e),n=e.children.concat(n)},DFTraverse:function(t){this.eachNode(t)},BFTraverse:function(t){for(var e,n=[this];e=n.shift();)t(e),n=n.concat(e.children)},getBoundingBox:function(){var t={left:Number.MAX_VALUE,top:Number.MAX_VALUE,width:0,height:0};return this.eachNode(function(e){t.left=Math.min(t.left,e.x),t.top=Math.min(t.top,e.y),t.width=Math.max(t.width,e.x+e.width),t.height=Math.max(t.height,e.y+e.height)}),t},translate:function(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.eachNode(function(n){n.x+=t,n.y+=e,n.x+=n.preH,n.y+=n.preV})},right2left:function(){var t=this.getBoundingBox();this.eachNode(function(e){e.x=e.x-(e.x-t.left)*2-e.width}),this.translate(t.width,0)},bottom2top:function(){var t=this.getBoundingBox();this.eachNode(function(e){e.y=e.y-(e.y-t.top)*2-e.height}),this.translate(0,t.height)}}),t.exports=function(t,e,n){void 0===e&&(e={}),e=i.assign({},r,e);var a,s=new o(t,e),h=[s];if(!n&&!t.collapsed){for(;a=h.shift();)if(!a.data.collapsed){var l=e.getChildren(a.data),u=l?l.length:0;if(a.children=Array(u),l&&u)for(var c=0;c<u;c++){var d=new o(l[c],e);a.children[c]=d,h.push(d),d.parent=a,d.depth=a.depth+1}}}return s}},function(t,e,n){var i=n(3);t.exports=function(t,e){for(var n=i(t.data,e,!0),r=i(t.data,e,!0),o=t.children.length,a=Math.round(o/2),s=e.getSide||function(t,e){return e<a?"right":"left"},h=0;h<o;h++){var l=t.children[h];"right"===s(l,h)?r.children.push(l):n.children.push(l)}return n.eachNode(function(t){t.isRoot()||(t.side="left")}),r.eachNode(function(t){t.isRoot()||(t.side="right")}),{left:n,right:r}}},function(t,e,n){var i={compactBox:n(6),dendrogram:n(8),indented:n(10),mindmap:n(12)};t.exports=i},function(t,e,n){function i(t,e){return(i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var r=n(1),o=n(7),a=n(2),s=n(0),h=function(t){function e(){return t.apply(this,arguments)||this}return e.prototype=Object.create(t.prototype),e.prototype.constructor=e,i(e,t),e.prototype.execute=function(){return a(this.rootNode,this.options,o)},e}(r),l={};t.exports=function(t,e){return e=s.assign({},l,e),new h(t,e).execute()}},function(t,e){function n(t,e,n,i){void 0===i&&(i=[]),this.w=t||0,this.h=e||0,this.y=n||0,this.x=0,this.c=i||[],this.cs=i.length,this.prelim=0,this.mod=0,this.shift=0,this.change=0,this.tl=null,this.tr=null,this.el=null,this.er=null,this.msel=0,this.mser=0}n.fromNode=function(t,e){if(!t)return null;var i=[];return(t.children.forEach(function(t){i.push(n.fromNode(t,e))}),e)?new n(t.height,t.width,t.x,i):new n(t.width,t.height,t.y,i)},t.exports=function(t,e){void 0===e&&(e={});var i,r=e.isHorizontal;function o(t){0===t.cs?(t.el=t,t.er=t,t.msel=t.mser=0):(t.el=t.c[0].el,t.msel=t.c[0].msel,t.er=t.c[t.cs-1].er,t.mser=t.c[t.cs-1].mser)}function a(t){return t.y+t.h}function s(t,e,n){for(;null!==n&&t>=n.low;)n=n.nxt;return{low:t,index:e,nxt:n}}!function t(e,n,i){void 0===i&&(i=0),n?(e.x=i,i+=e.width):(e.y=i,i+=e.height),e.children.forEach(function(e){t(e,n,i)})}(t,r);var h=n.fromNode(t,r);return function t(e){if(0===e.cs){o(e);return}t(e.c[0]);for(var n=s(a(e.c[0].el),0,null),i=1;i<e.cs;++i){t(e.c[i]);var r=a(e.c[i].er);(function(t,e,n){for(var i=t.c[e-1],r=i.mod,o=t.c[e],s=o.mod;null!==i&&null!==o;){a(i)>n.low&&(n=n.nxt);var h,l,u,c=r+i.prelim+i.w-(s+o.prelim);c>0&&(s+=c,h=n.index,t.c[e].mod+=c,t.c[e].msel+=c,t.c[e].mser+=c,function(t,e,n,i){if(n!==e-1){var r=e-n;t.c[n+1].shift+=i/r,t.c[e].shift-=i/r,t.c[e].change-=i-i/r}}(t,e,h,c));var d=a(i),p=a(o);d<=p&&null!==(i=0===(l=i).cs?l.tr:l.c[l.cs-1])&&(r+=i.mod),d>=p&&null!==(o=0===(u=o).cs?u.tl:u.c[0])&&(s+=o.mod)}!i&&o?function(t,e,n,i){var r=t.c[0].el;r.tl=n;var o=i-n.mod-t.c[0].msel;r.mod+=o,r.prelim-=o,t.c[0].el=t.c[e].el,t.c[0].msel=t.c[e].msel}(t,e,o,s):i&&!o&&function(t,e,n,i){var r=t.c[e].er;r.tr=n;var o=i-n.mod-t.c[e].mser;r.mod+=o,r.prelim-=o,t.c[e].er=t.c[e-1].er,t.c[e].mser=t.c[e-1].mser}(t,e,i,r)})(e,i,n),n=s(r,i,n)}e.prelim=(e.c[0].prelim+e.c[0].mod+e.c[e.cs-1].mod+e.c[e.cs-1].prelim+e.c[e.cs-1].w)/2-e.w/2,o(e)}(h),function t(e,n){n+=e.mod,e.x=e.prelim+n,function(t){for(var e=0,n=0,i=0;i<t.cs;i++)e+=t.c[i].shift,n+=e+t.c[i].change,t.c[i].mod+=n}(e);for(var i=0;i<e.cs;i++)t(e.c[i],n)}(h,0),function t(e,n,i){i?n.y=e.x:n.x=e.x,e.c.forEach(function(e,r){t(e,n.children[r],i)})}(h,t,r),i=function t(e,n){var i=n?e.y:e.x;return e.children.forEach(function(e){i=Math.min(t(e,n),i)}),i}(t,r),function t(e,n,i){i?e.y+=n:e.x+=n,e.children.forEach(function(e){t(e,n,i)})}(t,-i,r),t}},function(t,e,n){function i(t,e){return(i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var r=n(1),o=n(9),a=n(2),s=n(0),h=function(t){function e(){return t.apply(this,arguments)||this}return e.prototype=Object.create(t.prototype),e.prototype.constructor=e,i(e,t),e.prototype.execute=function(){return this.rootNode.width=0,a(this.rootNode,this.options,o)},e}(r),l={};t.exports=function(t,e){return e=s.assign({},l,e),new h(t,e).execute()}},function(t,e,n){var i=n(0);function r(t,e){void 0===t&&(t=0),void 0===e&&(e=[]),this.x=this.y=0,this.leftChild=this.rightChild=null,this.height=0,this.children=e}var o={isHorizontal:!0,nodeSep:20,nodeSize:20,rankSep:200,subTreeSep:10};t.exports=function(t,e){void 0===e&&(e={}),e=i.assign({},o,e);var n,a=0,s=function t(e){if(!e)return null;e.width=0,e.depth&&e.depth>a&&(a=e.depth);var n=e.children,i=n.length,o=new r(e.height,[]);return n.forEach(function(e,n){var r=t(e);o.children.push(r),0===n&&(o.leftChild=r),n===i-1&&(o.rightChild=r)}),o.originNode=e,o.isLeaf=e.isLeaf(),o}(t);return function t(e){if(e.isLeaf||0===e.children.length)e.drawingDepth=a;else{var n=e.children.map(function(e){return t(e)}),i=Math.min.apply(null,n);e.drawingDepth=i-1}return e.drawingDepth}(s),function t(i){i.x=i.drawingDepth*e.rankSep,i.isLeaf?(i.y=0,n&&(i.y=n.y+n.height+e.nodeSep,i.originNode.parent!==n.originNode.parent&&(i.y+=e.subTreeSep)),n=i):(i.children.forEach(function(e){t(e)}),i.y=(i.leftChild.y+i.rightChild.y)/2)}(s),function t(e,n,i){i?(n.x=e.x,n.y=e.y):(n.x=e.y,n.y=e.x),e.children.forEach(function(e,r){t(e,n.children[r],i)})}(s,t,e.isHorizontal),t}},function(t,e,n){function i(t,e){return(i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var r=n(1),o=n(11),a=n(4),s=n(0),h=["LR","RL","H"],l=h[0],u=function(t){function e(){return t.apply(this,arguments)||this}return e.prototype=Object.create(t.prototype),e.prototype.constructor=e,i(e,t),e.prototype.execute=function(){var t=this.options,e=this.rootNode;t.isHorizontal=!0;var n=t.indent,i=void 0===n?20:n,r=t.dropCap,s=void 0===r||r,u=t.direction,c=void 0===u?l:u,d=t.align;if(c&&-1===h.indexOf(c))throw TypeError("Invalid direction: "+c);if(c===h[0])o(e,i,s,d);else if(c===h[1])o(e,i,s,d),e.right2left();else if(c===h[2]){var p=a(e,t),f=p.left,y=p.right;o(f,i,s,d),f.right2left(),o(y,i,s,d);var g=f.getBoundingBox();y.translate(g.width,0),e.x=y.x-e.width/2}return e},e}(r),c={};t.exports=function(t,e){return e=s.assign({},c,e),new u(t,e).execute()}},function(t,e,n){var i=n(0);t.exports=function(t,e,n,r){var o=null;t.eachNode(function(t){(function(t,e,n,r,o){var a=("function"==typeof n?n(t):n)*t.depth;if(!r)try{if(t.id===t.parent.children[0].id){t.x+=a,t.y=e?e.y:0;return}}catch(t){}if(t.x+=a,e){if(t.y=e.y+i.getHeight(e,t,o),e.parent&&t.parent.id!==e.parent.id){var s=e.parent,h=s.y+i.getHeight(s,t,o);t.y=h>t.y?h:t.y}}else t.y=0})(t,o,e,n,r),o=t})}},function(t,e,n){function i(t,e){return(i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var r=n(1),o=n(13),a=n(2),s=n(0),h=function(t){function e(){return t.apply(this,arguments)||this}return e.prototype=Object.create(t.prototype),e.prototype.constructor=e,i(e,t),e.prototype.execute=function(){return a(this.rootNode,this.options,o)},e}(r),l={};t.exports=function(t,e){return e=s.assign({},l,e),new h(t,e).execute()}},function(t,e,n){var i=n(0),r={getSubTreeSep:function(){return 0}};t.exports=function(t,e){void 0===e&&(e={}),e=i.assign({},r,e),t.parent={x:0,width:0,height:0,y:0},t.BFTraverse(function(t){t.x=t.parent.x+t.parent.width}),t.parent=null,function t(e,n){var i=0;return e.children.length?e.children.forEach(function(e){i+=t(e,n)}):i=e.height,e._subTreeSep=n.getSubTreeSep(e.data),e.totalHeight=Math.max(e.height,i)+2*e._subTreeSep,e.totalHeight}(t,e),t.startY=0,t.y=t.totalHeight/2-t.height/2,t.eachNode(function(t){var e=t.children,n=e.length;if(n){var i=e[0];if(i.startY=t.startY+t._subTreeSep,1===n)i.y=t.y+t.height/2-i.height/2;else{i.y=i.startY+i.totalHeight/2-i.height/2;for(var r=1;r<n;r++){var o=e[r];o.startY=e[r-1].startY+e[r-1].totalHeight,o.y=o.startY+o.totalHeight/2-o.height/2}}}}),function t(e){var n=e.children,i=n.length;if(i){n.forEach(function(e){t(e)});var r=n[0],o=n[i-1],a=o.y-r.y+o.height,s=0;if(n.forEach(function(t){s+=t.totalHeight}),a>e.height)e.y=r.y+a/2-e.height/2;else if(1!==n.length||e.height>s){var h=e.y+(e.height-a)/2-r.y;n.forEach(function(t){t.translate(0,h)})}else e.y=(r.y+r.height/2+o.y+o.height/2)/2-e.height/2}}(t)}}])},69499:function(t,e,n){"use strict";n.d(e,{d9:function(){return E},kJ:function(){return s},jn:function(){return x},Xy:function(){return k},mf:function(){return a},hj:function(){return v},Kn:function(){return h},PO:function(){return c},HD:function(){return y},o8:function(){return m},CE:function(){return S},jj:function(){return g},EL:function(){return T}});var i,r={}.toString,o=function(t,e){return r.call(t)==="[object "+e+"]"},a=function(t){return o(t,"Function")},s=function(t){return Array.isArray?Array.isArray(t):o(t,"Array")},h=function(t){var e=typeof t;return null!==t&&"object"===e||"function"===e},l=function(t,e){if(t){if(s(t))for(var n=0,i=t.length;n<i&&!1!==e(t[n],n);n++);else if(h(t)){for(var r in t)if(t.hasOwnProperty(r)&&!1===e(t[r],r))break}}},u=function(t){return"object"==typeof t&&null!==t},c=function(t){if(!u(t)||!o(t,"Object"))return!1;if(null===Object.getPrototypeOf(t))return!0;for(var e=t;null!==Object.getPrototypeOf(e);)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e},d=function(t,e){if(void 0===e&&(e=[]),isArray(t))for(var n=0;n<t.length;n+=1)d(t[n],e);else e.push(t);return e},p=Array.prototype;p.splice,p.indexOf,Array.prototype.splice;var f=function(t,e,n){if(!s(t)&&!c(t))return t;var i=n;return l(t,function(t,n){i=e(i,t,n)}),i},y=function(t){return o(t,"String")};function g(t,e){void 0===e&&(e=new Map);var n=[];if(Array.isArray(t))for(var i=0,r=t.length;i<r;i++){var o=t[i];e.has(o)||(n.push(o),e.set(o,!0))}return n}Object.prototype.hasOwnProperty;var v=function(t){return o(t,"Number")},b=Object.values?function(t){return Object.values(t)}:function(t){var e=[];return l(t,function(n,i){a(t)&&"prototype"===i||e.push(n)}),e},x=function(t){return o(t,"Boolean")},m=function(t){return void 0===t},w=function(t){if("object"!=typeof t||null===t)return t;if(s(t)){e=[];for(var e,n=0,i=t.length;n<i;n++)"object"==typeof t[n]&&null!=t[n]?e[n]=w(t[n]):e[n]=t[n]}else for(var r in e={},t)"object"==typeof t[r]&&null!=t[r]?e[r]=w(t[r]):e[r]=t[r];return e},E=w;Object.prototype.hasOwnProperty;var M=function(t){return null!==t&&"function"!=typeof t&&isFinite(t.length)},L=function(t,e){if(t===e)return!0;if(!t||!e||y(t)||y(e))return!1;if(M(t)||M(e)){if(t.length!==e.length)return!1;for(var n=!0,i=0;i<t.length&&(n=L(t[i],e[i]));i++);return n}if(u(t)||u(e)){var r=Object.keys(t),o=Object.keys(e);if(r.length!==o.length)return!1;for(var n=!0,i=0;i<r.length&&(n=L(t[r[i]],e[r[i]]));i++);return n}return!1},k=L;Object.prototype.hasOwnProperty;var S=function(t,e){return f(t,function(t,n,i){return e.includes(i)||(t[i]=n),t},{})},N={},T=function(t){return N[t=t||"g"]?N[t]+=1:N[t]=1,t+N[t]},O=n(15767);!function(t,e){if(!a(t))throw TypeError("Expected a function");var n=function(){for(var i=[],r=0;r<arguments.length;r++)i[r]=arguments[r];var o=e?e.apply(this,i):i[0],a=n.cache;if(a.has(o))return a.get(o);var s=t.apply(this,i);return a.set(o,s),s};n.cache=new Map}(function(t,e){void 0===e&&(e={});var n=e.fontSize,r=e.fontFamily,o=e.fontWeight,a=e.fontStyle,s=e.fontVariant;return i||(i=document.createElement("canvas").getContext("2d")),i.font=[a,s,o,n+"px",r].join(" "),i.measureText(y(t)?t:"").width},function(t,e){return void 0===e&&(e={}),(0,O.pr)([t],b(e)).join("")}),function(){function t(){this.map={}}t.prototype.has=function(t){return void 0!==this.map[t]},t.prototype.get=function(t,e){var n=this.map[t];return void 0===n?e:n},t.prototype.set=function(t,e){this.map[t]=e},t.prototype.clear=function(){this.map={}},t.prototype.delete=function(t){delete this.map[t]},t.prototype.size=function(){return Object.keys(this.map).length}}()},5692:function(t,e,n){"use strict";n.d(e,{Z:function(){return o}});var i=n(13639),r=n(65443),o=function(t,e){return void 0===e&&(e=[]),(0,i.Z)(t,function(t){var n;return n=e,!((0,r.Z)(n)&&n.indexOf(t)>-1)})}},94432:function(t,e,n){"use strict";var i=n(18814),r=n(90079),o=Object.prototype.hasOwnProperty;e.Z=function(t,e){if(!e||!(0,i.Z)(t))return{};for(var n,a={},s=(0,r.Z)(e)?e:function(t){return t[e]},h=0;h<t.length;h++){var l=t[h];n=s(l),o.call(a,n)?a[n].push(l):a[n]=[l]}return a}},85381:function(t,e,n){"use strict";function i(t){return t instanceof Date}n.d(e,{Z:function(){return i}})},2581:function(t,e,n){"use strict";n.d(e,{Z:function(){return l}});var i=n(54663),r=n(65443),o={}.toString,a=Object.prototype,s=function(t){var e=t&&t.constructor,n="function"==typeof e&&e.prototype||a;return t===n},h=Object.prototype.hasOwnProperty,l=function(t){if((0,i.Z)(t))return!0;if((0,r.Z)(t))return!t.length;var e=o.call(t).replace(/^\[object /,"").replace(/]$/,"");if("Map"===e||"Set"===e)return!t.size;if(s(t))return!Object.keys(t).length;for(var n in t)if(h.call(t,n))return!1;return!0}},90630:function(t,e,n){"use strict";function i(t,e){void 0===e&&(e=new Map);var n=[];if(Array.isArray(t))for(var i=0,r=t.length;i<r;i++){var o=t[i];e.has(o)||(n.push(o),e.set(o,!0))}return n}n.d(e,{Z:function(){return i}})},16403:function(t,e){"use strict";var n={};e.Z=function(t){return n[t=t||"g"]?n[t]+=1:n[t]=1,t+n[t]}},25470:function(t,e,n){"use strict";var i,r,o,a,s,h;function l(t,e,n,i,r,o){let a=n-t,s=i-e,h=r-t,l=o-e,u=h*a+l*s,c=0;c=u<=0?0:(u=(h=a-h)*a+(l=s-l)*s)<=0?0:u*u/(a*a+s*s);let d=h*h+l*l-c;return d<0?0:d}function u(t,e,n,i){return(t-n)*(t-n)+(e-i)*(e-i)}function c(t){let e=Math.min(t.x1,t.x2),n=Math.max(t.x1,t.x2),i=Math.min(t.y1,t.y2),r=Math.max(t.y1,t.y2);return{x:e,y:i,x2:n,y2:r,width:n-e,height:r-i}}n.d(e,{Ae:function(){return b},CF:function(){return j},vC:function(){return I},x1:function(){return d}});class d{constructor(t,e,n,i){this.x1=t,this.y1=e,this.x2=n,this.y2=i}equals(t){return this.x1===t.x1&&this.y1===t.y1&&this.x2===t.x2&&this.y2===t.y2}draw(t){t.moveTo(this.x1,this.y1),t.lineTo(this.x2,this.y2)}toString(){return`Line(from=(${this.x1},${this.y1}),to=(${this.x2},${this.y2}))`}static from(t){return new d(t.x1,t.y1,t.x2,t.y2)}cuts(t,e){if(this.y1===this.y2||e<this.y1&&e<=this.y2||e>this.y1&&e>=this.y2||t>this.x1&&t>=this.x2)return!1;if(t<this.x1&&t<=this.x2)return!0;let n=this.x1+(e-this.y1)*(this.x2-this.x1)/(this.y2-this.y1);return t<=n}distSquare(t,e){return l(this.x1,this.y1,this.x2,this.y2,t,e)}ptClose(t,e,n){if(this.x1<this.x2){if(t<this.x1-n||t>this.x2+n)return!1}else if(t<this.x2-n||t>this.x1+n)return!1;if(this.y1<this.y2){if(e<this.y1-n||e>this.y2+n)return!1}else if(e<this.y2-n||e>this.y1+n)return!1;return!0}}(a=i||(i={}))[a.POINT=1]="POINT",a[a.PARALLEL=2]="PARALLEL",a[a.COINCIDENT=3]="COINCIDENT",a[a.NONE=4]="NONE";class p{constructor(t,e=0,n=0){this.state=t,this.x=e,this.y=n}}function f(t,e){let n=(e.x2-e.x1)*(t.y1-e.y1)-(e.y2-e.y1)*(t.x1-e.x1),r=(t.x2-t.x1)*(t.y1-e.y1)-(t.y2-t.y1)*(t.x1-e.x1),o=(e.y2-e.y1)*(t.x2-t.x1)-(e.x2-e.x1)*(t.y2-t.y1);if(o){let e=n/o,a=r/o;return 0<=e&&e<=1&&0<=a&&a<=1?new p(i.POINT,t.x1+e*(t.x2-t.x1),t.y1+e*(t.y2-t.y1)):new p(i.NONE)}return new p(0===n||0===r?i.COINCIDENT:i.PARALLEL)}function y(t,e){let n=(e.x2-e.x1)*(t.y1-e.y1)-(e.y2-e.y1)*(t.x1-e.x1),i=(t.x2-t.x1)*(t.y1-e.y1)-(t.y2-t.y1)*(t.x1-e.x1),r=(e.y2-e.y1)*(t.x2-t.x1)-(e.x2-e.x1)*(t.y2-t.y1);if(r){let t=n/r,e=i/r;if(0<=t&&t<=1&&0<=e&&e<=1)return t}return Number.POSITIVE_INFINITY}function g(t,e,n){let i=new Set;return t.width<=0?(i.add(r.LEFT),i.add(r.RIGHT)):e<t.x?i.add(r.LEFT):e>t.x+t.width&&i.add(r.RIGHT),t.height<=0?(i.add(r.TOP),i.add(r.BOTTOM)):n<t.y?i.add(r.TOP):n>t.y+t.height&&i.add(r.BOTTOM),i}function v(t,e){let n=e.x1,i=e.y1,o=e.x2,a=e.y2,s=Array.from(g(t,o,a));if(0===s.length)return!0;let h=g(t,n,i);for(;0!==h.size;){for(let t of s)if(h.has(t))return!1;if(h.has(r.RIGHT)||h.has(r.LEFT)){let e=t.x;h.has(r.RIGHT)&&(e+=t.width),i+=(e-n)*(a-i)/(o-n),n=e}else{let e=t.y;h.has(r.BOTTOM)&&(e+=t.height),n+=(e-i)*(o-n)/(a-i),i=e}h=g(t,n,i)}return!0}(s=r||(r={}))[s.LEFT=0]="LEFT",s[s.TOP=1]="TOP",s[s.RIGHT=2]="RIGHT",s[s.BOTTOM=3]="BOTTOM";class b{constructor(t,e,n,i){this.x=t,this.y=e,this.width=n,this.height=i}get x2(){return this.x+this.width}get y2(){return this.y+this.height}get cx(){return this.x+this.width/2}get cy(){return this.y+this.height/2}get radius(){return Math.max(this.width,this.height)/2}static from(t){return new b(t.x,t.y,t.width,t.height)}equals(t){return this.x===t.x&&this.y===t.y&&this.width===t.width&&this.height===t.height}clone(){return new b(this.x,this.y,this.width,this.height)}add(t){let e=Math.min(this.x,t.x),n=Math.min(this.y,t.y),i=Math.max(this.x2,t.x+t.width),r=Math.max(this.y2,t.y+t.height);this.x=e,this.y=n,this.width=i-e,this.height=r-n}addPoint(t){let e=Math.min(this.x,t.x),n=Math.min(this.y,t.y),i=Math.max(this.x2,t.x),r=Math.max(this.y2,t.y);this.x=e,this.y=n,this.width=i-e,this.height=r-n}toString(){return`Rectangle[x=${this.x}, y=${this.y}, w=${this.width}, h=${this.height}]`}draw(t){t.rect(this.x,this.y,this.width,this.height)}containsPt(t,e){return t>=this.x&&t<=this.x2&&e>=this.y&&e<=this.y2}get area(){return this.width*this.height}intersects(t){return!(this.area<=0)&&!(t.width<=0)&&!(t.height<=0)&&t.x+t.width>this.x&&t.y+t.height>this.y&&t.x<this.x2&&t.y<this.y2}distSquare(t,e){if(this.containsPt(t,e))return 0;let n=g(this,t,e);return n.has(r.TOP)?n.has(r.LEFT)?u(t,e,this.x,this.y):n.has(r.RIGHT)?u(t,e,this.x2,this.y):(this.y-e)*(this.y-e):n.has(r.BOTTOM)?n.has(r.LEFT)?u(t,e,this.x,this.y2):n.has(r.RIGHT)?u(t,e,this.x2,this.y2):(e-this.y2)*(e-this.y2):n.has(r.LEFT)?(this.x-t)*(this.x-t):n.has(r.RIGHT)?(t-this.x2)*(t-this.x2):0}}class x{constructor(t,e,n){this.cx=t,this.cy=e,this.radius=n}get x(){return this.cx-this.radius}get x2(){return this.cx+this.radius}get width(){return 2*this.radius}get y(){return this.cy-this.radius}get y2(){return this.cy+this.radius}get height(){return 2*this.radius}static from(t){return new x(t.cx,t.cy,t.radius)}containsPt(t,e){return u(this.cx,this.cy,t,e)<this.radius*this.radius}distSquare(t,e){let n=u(this.cx,this.cy,t,e);if(n<this.radius*this.radius)return 0;let i=Math.sqrt(n)-this.radius;return i*i}draw(t){t.ellipse(this.cx,this.cy,this.radius,this.radius,0,0,2*Math.PI)}}class m{constructor(t,e=0,n=0,i=0,r=0,o=10,a=10,s=new Float32Array(Math.max(0,o*a)).fill(0)){this.pixelGroup=t,this.i=e,this.j=n,this.pixelX=i,this.pixelY=r,this.width=o,this.height=a,this.area=s}createSub(t,e){return new m(this.pixelGroup,t.x,t.y,e.x,e.y,t.width,t.height)}static fromPixelRegion(t,e){return new m(e,0,0,t.x,t.y,Math.ceil(t.width/e),Math.ceil(t.height/e))}copy(t,e){return new m(this.pixelGroup,this.scaleX(e.x),this.scaleY(e.y),e.x,e.y,t.width,t.height,t.area)}boundX(t){return t<this.i?this.i:t>=this.width?this.width-1:t}boundY(t){return t<this.j?this.j:t>=this.height?this.height-1:t}scaleX(t){return this.boundX(Math.floor((t-this.pixelX)/this.pixelGroup))}scaleY(t){return this.boundY(Math.floor((t-this.pixelY)/this.pixelGroup))}scale(t){let e=this.scaleX(t.x),n=this.scaleY(t.y),i=this.boundX(Math.ceil((t.x+t.width-this.pixelX)/this.pixelGroup)),r=this.boundY(Math.ceil((t.y+t.height-this.pixelY)/this.pixelGroup)),o=i-e,a=r-n;return new b(e,n,o,a)}invertScaleX(t){return Math.round(t*this.pixelGroup+this.pixelX)}invertScaleY(t){return Math.round(t*this.pixelGroup+this.pixelY)}addPadding(t,e){let n=Math.ceil(e/this.pixelGroup),i=this.boundX(t.x-n),r=this.boundY(t.y-n),o=this.boundX(t.x2+n),a=this.boundY(t.y2+n),s=o-i,h=a-r;return new b(i,r,s,h)}get(t,e){return t<0||e<0||t>=this.width||e>=this.height?Number.NaN:this.area[t+e*this.width]}inc(t,e,n){t<0||e<0||t>=this.width||e>=this.height||(this.area[t+e*this.width]+=n)}set(t,e,n){t<0||e<0||t>=this.width||e>=this.height||(this.area[t+e*this.width]=n)}incArea(t,e){if(t.width<=0||t.height<=0||0===e)return;let n=this.width,i=t.width,r=Math.max(0,t.i),o=Math.max(0,t.j),a=Math.min(t.i+t.width,n),s=Math.min(t.j+t.height,this.height);if(!(s<=0)&&!(a<=0)&&!(r>=n)&&!(s>=this.height))for(let h=o;h<s;h++){let o=(h-t.j)*i,s=h*n;for(let n=r;n<a;n++){let i=t.area[n-t.i+o];0!==i&&(this.area[n+s]+=e*i)}}}fill(t){this.area.fill(t)}fillArea(t,e){let n=t.x+t.y*this.width;for(let i=0;i<t.height;i++){let r=n+i*this.width;this.area.fill(e,r,r+t.width)}}fillHorizontalLine(t,e,n,i){let r=t+e*this.width;this.area.fill(i,r,r+n)}fillVerticalLine(t,e,n,i){let r=t+e*this.width;for(let t=0;t<n;t++)this.area[r+t*this.width]=i}clear(){this.area.fill(0)}toString(){let t="";for(let e=0;e<this.height;e++){let n=e*this.width;for(let e=0;e<this.width;e++){let i=this.area[n+e];t+=i.toFixed(1).padStart(6)+" "}t+="\n"}return t}draw(t,e=!0){if(this.width<=0||this.height<=0)return;t.save(),e&&t.translate(this.pixelX,this.pixelY);let n=this.area.reduce((t,e)=>Math.min(t,e),Number.POSITIVE_INFINITY),i=this.area.reduce((t,e)=>Math.max(t,e),Number.NEGATIVE_INFINITY),r=t=>(t-n)/(i-n);t.scale(this.pixelGroup,this.pixelGroup);for(let e=0;e<this.width;e++)for(let n=0;n<this.height;n++){let i=this.area[e+n*this.width];t.fillStyle=`rgba(0, 0, 0, ${r(i)})`,t.fillRect(e,n,1,1)}t.restore()}drawThreshold(t,e,n=!0){if(!(this.width<=0)&&!(this.height<=0)){t.save(),n&&t.translate(this.pixelX,this.pixelY),t.scale(this.pixelGroup,this.pixelGroup);for(let n=0;n<this.width;n++)for(let i=0;i<this.height;i++){let r=this.area[n+i*this.width];t.fillStyle=r>e?"black":"white",t.fillRect(n,i,1,1)}t.restore()}}}function w(t,e){let n=t=>({x:t.x-e,y:t.y-e,width:t.width+2*e,height:t.height+2*e});return Array.isArray(t)?t.map(n):n(t)}function E(t,e,n){return M(Object.assign(c(t),{distSquare:(e,n)=>l(t.x1,t.y1,t.x2,t.y2,e,n)}),e,n)}function M(t,e,n){let i=w(t,n),r=e.scale(i),o=e.createSub(r,i);return function(t,e,n,i){let r=n*n;for(let o=0;o<t.height;o++)for(let a=0;a<t.width;a++){let s=e.invertScaleX(t.i+a),h=e.invertScaleY(t.j+o),l=i(s,h);if(0===l){t.set(a,o,r);continue}if(l<r){let e=n-Math.sqrt(l);t.set(a,o,e*e)}}}(o,e,n,(e,n)=>t.distSquare(e,n)),o}function L(t,e){return e.some(e=>e.containsPt(t.x,t.y))}function k(t,e){return e.some(e=>{var n,i,r,o;return n=e.x1,i=e.y1,1e-6>u(n,i,t.x,t.y)||(r=e.x2,o=e.y2,1e-6>u(r,o,t.x,t.y))})}function S(t,e){let n=Number.POSITIVE_INFINITY,i=null;for(let r of t){if(!v(r,e))continue;let t=function(t,e){let n=Number.POSITIVE_INFINITY,i=0;function r(t,r,o,a){let s=y(e,new d(t,r,o,a));(s=Math.abs(s-.5))>=0&&s<=1&&(i++,s<n&&(n=s))}return(r(t.x,t.y,t.x2,t.y),r(t.x,t.y,t.x,t.y2),i>1)?n:(r(t.x,t.y2,t.x2,t.y2),i>1)?n:(r(t.x2,t.y,t.x2,t.y2),0===i)?-1:n}(r,e);t>=0&&t<n&&(i=r,n=t)}return i}function N(t,e,n,r){let o=n.top,a=n.left,s=n.bottom,h=n.right;if(r){if(a.state===i.POINT){if(o.state===i.POINT)return{x:t.x-e,y:t.y-e};if(s.state===i.POINT)return{x:t.x-e,y:t.y2+e};let n=t.width*t.height,r=t.width*((a.y-t.y+(h.y-t.y))*.5);return r<.5*n?a.y>h.y?{x:t.x-e,y:t.y-e}:{x:t.x2+e,y:t.y-e}:a.y<h.y?{x:t.x-e,y:t.y2+e}:{x:t.x2+e,y:t.y2+e}}if(h.state===i.POINT){if(o.state===i.POINT)return{x:t.x2+e,y:t.y-e};if(s.state===i.POINT)return{x:t.x2+e,y:t.y2+e}}let n=t.height*t.width,r=t.height*((o.x-t.x+(h.x-t.x))*.5);return r<.5*n?o.x>s.x?{x:t.x-e,y:t.y-e}:{x:t.x-e,y:t.y2+e}:o.x<s.x?{x:t.x2+e,y:t.y-e}:{x:t.x2+e,y:t.y2+e}}if(a.state===i.POINT){if(o.state===i.POINT)return{x:t.x2+e,y:t.y2+e};if(s.state===i.POINT)return{x:t.x2+e,y:t.y-e};let n=t.height*t.width,r=t.width*((a.y-t.y+(h.y-t.y))*.5);return r<.5*n?a.y>h.y?{x:t.x2+e,y:t.y2+e}:{x:t.x-e,y:t.y2+e}:a.y<h.y?{x:t.x2+e,y:t.y-e}:{x:t.x-e,y:t.y-e}}if(h.state===i.POINT){if(o.state===i.POINT)return{x:t.x-e,y:t.y2+e};if(s.state===i.POINT)return{x:t.x-e,y:t.y-e}}let l=t.height*t.width,u=t.height*((o.x-t.x+(h.x-t.x))*.5);return u<.5*l?o.x>s.x?{x:t.x2+e,y:t.y2+e}:{x:t.x2+e,y:t.y-e}:o.x<s.x?{x:t.x-e,y:t.y2+e}:{x:t.x-e,y:t.y-e}}class T{constructor(t=[],e=!0){this.points=t,this.closed=e}get(t){let e=this.points.length;return t<0?this.closed?this.get(t+e):this.points[0]:t>=e?this.closed?this.get(t-e):this.points[e-1]:this.points[t]}get length(){return this.points.length}toString(t=1/0){let e=this.points;if(0===e.length)return"";let n="function"==typeof t?t:function(t){if(!Number.isFinite(t))return t=>t;if(0===t)return Math.round;let e=Math.pow(10,t);return t=>Math.round(t*e)/e}(t),i="M";for(let t of e)i+=`${n(t.x)},${n(t.y)} L`;return i=i.slice(0,-1),this.closed&&(i+=" Z"),i}draw(t){let e=this.points;if(0!==e.length){for(let n of(t.beginPath(),t.moveTo(e[0].x,e[0].y),e))t.lineTo(n.x,n.y);this.closed&&t.closePath()}}sample(t){return(function(t=8){return e=>{let n=t,i=e.length;if(n>1)for(i=Math.floor(e.length/n);i<3&&n>1;)n-=1,i=Math.floor(e.length/n);let r=[];for(let t=0,o=0;o<i;o++,t+=n)r.push(e.get(t));return new T(r)}})(t)(this)}simplify(t){return(function(t=0){return e=>{if(t<0||e.length<3)return e;let n=[],i=0,r=t*t;for(;i<e.length;){let t=i+1;for(;function(t,e,n,i){let r=t.closed?n<t.length:n<t.length-1;if(!r)return!1;let o=t.get(e),a=t.get(n+1);for(let r=e+1;r<=n;r++){let e=t.get(r),n=l(o.x,o.y,a.x,a.y,e.x,e.y);if(n>i)return!1}return!0}(e,i,t,r);)t++;n.push(e.get(i)),i=t}return new T(n)}})(t)(this)}bSplines(t){return(function(t=6){function e(t,e,n){let i=0,r=0;for(let o=-2;o<=1;o++){let a=t.get(e+o),s=function(t,e){switch(t){case -2:return(((-e+3)*e-3)*e+1)/6;case -1:return((3*e-6)*e*e+4)/6;case 0:return(((-3*e+3)*e+3)*e+1)/6;case 1:return e*e*e/6;default:throw Error("unknown error")}}(o,n);i+=s*a.x,r+=s*a.y}return{x:i,y:r}}return n=>{if(n.length<3)return n;let i=[],r=n.closed,o=n.length+3-1+(r?0:2);i.push(e(n,2-(r?0:2),0));for(let a=2-(r?0:2);a<o;a++)for(let r=1;r<=t;r++)i.push(e(n,a,r/t));return new T(i)}})(t)(this)}apply(t){return t(this)}containsElements(t){let e=function(t){if(0===t.length)return null;let e=t[0],n=new b(e.x,e.y,0,0);for(let e of t)n.addPoint(e);return n}(this.points);return!!e&&t.every(t=>e.containsPt(t.cx,t.cy)&&this.withinArea(t.cx,t.cy))}withinArea(t,e){if(0===this.length)return!1;let n=0,i=this.points[0],r=new d(i.x,i.y,i.x,i.y);for(let i=1;i<this.points.length;i++){let o=this.points[i];r.x1=r.x2,r.y1=r.y2,r.x2=o.x,r.y2=o.y,r.cuts(t,e)&&n++}return r.x1=r.x2,r.y1=r.y2,r.x2=i.x,r.y2=i.y,r.cuts(t,e)&&n++,n%2==1}}class O{constructor(t=0){this.count=0,this.arr=[],this.set=new Set,this.arr.length=t}add(t){this.set.add(`${t.x}x${t.y}`),this.arr[this.count++]=t}contains(t){return this.set.has(`${t.x}x${t.y}`)}isFirst(t){if(0===this.count)return!1;let e=this.arr[0];return null!=e&&e.x===t.x&&e.y===t.y}path(){return new T(this.arr.slice(0,this.count))}clear(){this.set.clear(),this.count=0}get(t){return this.arr[t]}get length(){return this.count}}let I={maxRoutingIterations:100,maxMarchingIterations:20,pixelGroup:4,edgeR0:10,edgeR1:20,nodeR0:15,nodeR1:50,morphBuffer:10,threshold:1,memberInfluenceFactor:1,edgeInfluenceFactor:1,nonMemberInfluenceFactor:-.8,virtualEdges:!0};function P(t){return null!=t&&"number"==typeof t.radius}function C(t,e){return P(t)===P(e)&&(P(t)?t.cx===e.cx&&t.cy===e.cy&&t.radius===e.radius:t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height)}(h=o||(o={}))[h.MEMBERS=0]="MEMBERS",h[h.NON_MEMBERS=1]="NON_MEMBERS",h[h.EDGES=2]="EDGES";class j{constructor(t={}){this.dirty=new Set,this.members=[],this.nonMembers=[],this.virtualEdges=[],this.edges=[],this.activeRegion=new b(0,0,0,0),this.potentialArea=new m(1,0,0,0,0,0,0),this.o=Object.assign({},I,t)}pushMember(...t){if(0!==t.length)for(let e of(this.dirty.add(o.MEMBERS),t))this.members.push({raw:e,obj:P(e)?x.from(e):b.from(e),area:null})}removeMember(t){let e=this.members.findIndex(e=>C(e.raw,t));return!(e<0)&&(this.members.splice(e,1),this.dirty.add(o.MEMBERS),!0)}removeNonMember(t){let e=this.nonMembers.findIndex(e=>C(e.raw,t));return!(e<0)&&(this.nonMembers.splice(e,1),this.dirty.add(o.NON_MEMBERS),!0)}removeEdge(t){let e=this.edges.findIndex(e=>e.obj.equals(t));return!(e<0)&&(this.edges.splice(e,1),this.dirty.add(o.NON_MEMBERS),!0)}pushNonMember(...t){if(0!==t.length)for(let e of(this.dirty.add(o.NON_MEMBERS),t))this.nonMembers.push({raw:e,obj:P(e)?x.from(e):b.from(e),area:null})}pushEdge(...t){if(0!==t.length)for(let e of(this.dirty.add(o.EDGES),t))this.edges.push({raw:e,obj:d.from(e),area:null})}update(){let t=this.dirty.has(o.MEMBERS),e=this.dirty.has(o.NON_MEMBERS),n=this.dirty.has(o.EDGES);this.dirty.clear();let r=this.members.map(t=>t.obj);if(this.o.virtualEdges&&(t||e)){let t=this.nonMembers.map(t=>t.obj),e=function(t,e,n,r){if(0===t.length)return[];let o=function(t){if(t.length<2)return t;let e=0,n=0;return t.forEach(t=>{e+=t.cx,n+=t.cy}),e/=t.length,n/=t.length,t.map(t=>{let i=e-t.cx,r=n-t.cy;return[t,i*i+r*r]}).sort((t,e)=>t[1]-e[1]).map(t=>t[0])}(t);return o.map((t,a)=>{let s=o.slice(0,a);return function(t,e,n,r,o){let a;let s={x:e.cx,y:e.cy},h=(a=Number.POSITIVE_INFINITY,n.reduce((e,n)=>{let i=u(s.x,s.y,n.cx,n.cy);if(i>a)return e;let r=new d(s.x,s.y,n.cx,n.cy),o=t.reduce((t,e)=>v(e,r)&&function(t,e){function n(t,n,i,r){let o=y(e,new d(t,n,i,r));return(o=Math.abs(o-.5))>=0&&o<=1?1:0}let i=n(t.x,t.y,t.x2,t.y);return!!((i+=n(t.x,t.y,t.x,t.y2))>1||(i+=n(t.x,t.y2,t.x2,t.y2))>1)||(i+=n(t.x2,t.y,t.x2,t.y2))>0}(e,r)?t+1:t,0);return i*(o+1)*(o+1)<a&&(e=n,a=i*(o+1)*(o+1)),e},null));if(null==h)return[];let l=new d(s.x,s.y,h.cx,h.cy),c=function(t,e,n,r){let o=[],a=[];a.push(t);let s=!0;for(let t=0;t<n&&s;t++)for(s=!1;!s&&a.length>0;){let t=a.pop(),n=S(e,t),h=n?function(t,e){let n=0,r=f(t,new d(e.x,e.y,e.x2,e.y));n+=r.state===i.POINT?1:0;let o=f(t,new d(e.x,e.y,e.x,e.y2));n+=o.state===i.POINT?1:0;let a=f(t,new d(e.x,e.y2,e.x2,e.y2));n+=a.state===i.POINT?1:0;let s=f(t,new d(e.x2,e.y,e.x2,e.y2));return{top:r,left:o,bottom:a,right:s,count:n+=s.state===i.POINT?1:0}}(t,n):null;if(!n||!h||2!==h.count){s||o.push(t);continue}let l=r,u=N(n,l,h,!0),c=k(u,a)||k(u,o),p=L(u,e);for(;!c&&p&&l>=1;)l/=1.5,c=k(u=N(n,l,h,!0),a)||k(u,o),p=L(u,e);if(!u||c||p||(a.push(new d(t.x1,t.y1,u.x,u.y)),a.push(new d(u.x,u.y,t.x2,t.y2)),s=!0),s)continue;let y=k(u=N(n,l=r,h,!1),a)||k(u,o);for(p=L(u,e);!y&&p&&l>=1;)l/=1.5,y=k(u=N(n,l,h,!1),a)||k(u,o),p=L(u,e);u&&!y&&(a.push(new d(t.x1,t.y1,u.x,u.y)),a.push(new d(u.x,u.y,t.x2,t.y2)),s=!0),s||o.push(t)}for(;a.length>0;)o.push(a.pop());return o}(l,t,r,o);return function(t,e){let n=[];for(;t.length>0;){let i=t.pop();if(0===t.length){n.push(i);break}let r=t.pop(),o=new d(i.x1,i.y1,r.x2,r.y2),a=S(e,o);a?(n.push(i),t.push(r)):t.push(o)}return n}(c,t)}(e,t,s,n,r)}).flat()}(r,t,this.o.maxRoutingIterations,this.o.morphBuffer),o=new Map(this.virtualEdges.map(t=>[t.obj.toString(),t.area]));this.virtualEdges=e.map(t=>{var e;return{raw:t,obj:t,area:null!==(e=o.get(t.toString()))&&void 0!==e?e:null}}),n=!0}let a=!1;if(t||n){let t=this.virtualEdges.concat(this.edges).map(t=>t.obj),e=function(t,e){if(0===t.length)return new b(0,0,0,0);let n=b.from(t[0]);for(let e of t)n.add(e);for(let t of e)n.add(c(t));return n}(r,t),n=Math.max(this.o.edgeR1,this.o.nodeR1)+this.o.morphBuffer,i=b.from(w(e,n));i.equals(this.activeRegion)||(a=!0,this.activeRegion=i)}if(a){let t=Math.ceil(this.activeRegion.width/this.o.pixelGroup),e=Math.ceil(this.activeRegion.height/this.o.pixelGroup);this.activeRegion.x!==this.potentialArea.pixelX||this.activeRegion.y!==this.potentialArea.pixelY?(this.potentialArea=m.fromPixelRegion(this.activeRegion,this.o.pixelGroup),this.members.forEach(t=>t.area=null),this.nonMembers.forEach(t=>t.area=null),this.edges.forEach(t=>t.area=null),this.virtualEdges.forEach(t=>t.area=null)):(t!==this.potentialArea.width||e!==this.potentialArea.height)&&(this.potentialArea=m.fromPixelRegion(this.activeRegion,this.o.pixelGroup))}let s=new Map,h=t=>{if(t.area){let e=`${t.obj.width}x${t.obj.height}x${t.obj instanceof b?"R":"C"}`;s.set(e,t.area)}},l=t=>{if(t.area)return;let e=`${t.obj.width}x${t.obj.height}x${t.obj instanceof b?"R":"C"}`;if(s.has(e)){let n=s.get(e);t.area=this.potentialArea.copy(n,{x:t.obj.x-this.o.nodeR1,y:t.obj.y-this.o.nodeR1});return}let n=t.obj instanceof b?function(t,e,n){let i=e.scale(t),r=e.addPadding(i,n),o=e.createSub(r,{x:t.x-n,y:t.y-n}),a=i.x-r.x,s=i.y-r.y,h=r.x2-i.x2,l=r.y2-i.y2,u=r.width-a-h,c=r.height-s-l,d=n*n;o.fillArea({x:a,y:s,width:u+1,height:c+1},d);let p=[0],f=Math.max(s,a,h,l);{let r=e.invertScaleX(i.x+i.width/2);for(let o=1;o<f;o++){let a=e.invertScaleY(i.y-o),s=t.distSquare(r,a);if(s<d){let t=n-Math.sqrt(s);p.push(t*t)}else break}}let y=[],g=Math.max(a,h),v=Math.max(s,h);for(let r=1;r<g;r++){let o=e.invertScaleX(i.x-r),a=[];for(let r=1;r<v;r++){let s=e.invertScaleY(i.y-r),h=t.distSquare(o,s);if(h<d){let t=n-Math.sqrt(h);a.push(t*t)}else a.push(0)}y.push(a)}for(let t=1;t<Math.min(s,p.length);t++){let e=p[t];o.fillHorizontalLine(a,s-t,u+1,e)}for(let t=1;t<Math.min(l,p.length);t++){let e=p[t];o.fillHorizontalLine(a,s+c+t,u+1,e)}for(let t=1;t<Math.min(a,p.length);t++){let e=p[t];o.fillVerticalLine(a-t,s,c+1,e)}for(let t=1;t<Math.min(l,p.length);t++){let e=p[t];o.fillVerticalLine(a+u+t,s,c+1,e)}for(let t=1;t<a;t++){let e=y[t-1],n=a-t;for(let t=1;t<s;t++)o.set(n,s-t,e[t-1]);for(let t=1;t<l;t++)o.set(n,s+c+t,e[t-1])}for(let t=1;t<h;t++){let e=y[t-1],n=a+u+t;for(let t=1;t<s;t++)o.set(n,s-t,e[t-1]);for(let t=1;t<l;t++)o.set(n,s+c+t,e[t-1])}return o}(t.obj,this.potentialArea,this.o.nodeR1):M(t.obj,this.potentialArea,this.o.nodeR1);t.area=n,s.set(e,n)};this.members.forEach(h),this.nonMembers.forEach(h),this.members.forEach(l),this.nonMembers.forEach(t=>{this.activeRegion.intersects(t.obj)?l(t):t.area=null}),this.edges.forEach(t=>{t.area||(t.area=E(t.obj,this.potentialArea,this.o.edgeR1))}),this.virtualEdges.forEach(t=>{t.area||(t.area=E(t.obj,this.potentialArea,this.o.edgeR1))})}drawMembers(t){for(let e of this.members)e.obj.draw(t)}drawNonMembers(t){for(let e of this.nonMembers)e.obj.draw(t)}drawEdges(t){for(let e of this.edges)e.obj.draw(t)}drawPotentialArea(t,e=!0){this.potentialArea.draw(t,e)}compute(){if(0===this.members.length)return new T([]);this.dirty.size>0&&this.update();let{o:t,potentialArea:e}=this,n=this.members.map(t=>t.area),i=this.virtualEdges.concat(this.edges).map(t=>t.area),r=this.nonMembers.filter(t=>null!=t.area).map(t=>t.area),o=this.members.map(t=>t.obj);return function(t,e,n,i,r,o={}){let a=Object.assign({},I,o),s=a.threshold,h=a.memberInfluenceFactor,l=a.edgeInfluenceFactor,u=a.nonMemberInfluenceFactor,c=(a.nodeR0-a.nodeR1)*(a.nodeR0-a.nodeR1),d=(a.edgeR0-a.edgeR1)*(a.edgeR0-a.edgeR1);for(let o=0;o<a.maxMarchingIterations;o++){if(t.clear(),0!==h){let n=h/c;for(let i of e)t.incArea(i,n)}if(0!==l){let e=l/d;for(let i of n)t.incArea(i,e)}if(0!==u){let e=u/c;for(let n of i)t.incArea(n,e)}let p=function(t,e){let n=(Math.floor(t.width)+Math.floor(t.height))*2,i=new O(n);function r(n,i,r,o){let a=t.get(n,i);return Number.isNaN(a)?Number.NaN:a>e?r+o:r}function o(t,e){let n=0;return(n=r(t,e,0,1),n=r(t+1,e,n,2),n=r(t,e+1,n,4),Number.isNaN(n=r(t+1,e+1,n,8)))?-1:n}let a=1;for(let n=0;n<t.width;n++)for(let r=0;r<t.height;r++){if(t.get(n,r)<=e)continue;let s=o(n,r);if(!(s<0)&&15!==s&&function(e,n){let r=e,s=n,h=t.invertScaleX(r),l=t.invertScaleY(s);for(let e=0;e<t.width*t.height;e++){let e={x:h,y:l};if(i.contains(e)){if(i.isFirst(e))break}else i.add(e);let n=o(r,s);switch(n){case -1:return!0;case 0:case 3:case 2:case 7:a=2;break;case 12:case 14:case 4:a=3;break;case 6:a=0===a?3:2;break;case 1:case 13:case 5:a=0;break;case 9:a=2===a?0:1;break;case 10:case 8:case 11:a=1;break;default:return console.warn("Marching squares invalid state: "+n),!0}switch(a){case 0:s--,l-=t.pixelGroup;break;case 1:s++,l+=t.pixelGroup;break;case 3:r--,h-=t.pixelGroup;break;case 2:r++,h+=t.pixelGroup;break;default:return console.warn("Marching squares invalid state: "+n),!0}}return!0}(n,r))return i.path()}return null}(t,s);if(p&&r(p))return p;if(s*=.95,o<=.5*a.maxMarchingIterations)h*=1.2,l*=1.2;else if(0!==u&&i.length>0)u*=.8;else break}return new T([])}(e,n,i,r,t=>t.containsElements(o),t)}}},80345:function(t,e,n){"use strict";n.d(e,{Ud:function(){return c},Yy:function(){return o}});/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let i=Symbol("Comlink.proxy"),r=Symbol("Comlink.endpoint"),o=Symbol("Comlink.releaseProxy"),a=Symbol("Comlink.finalizer"),s=Symbol("Comlink.thrown"),h=t=>"object"==typeof t&&null!==t||"function"==typeof t,l=new Map([["proxy",{canHandle:t=>h(t)&&t[i],serialize(t){let{port1:e,port2:n}=new MessageChannel;return function t(e,n=globalThis,r=["*"]){n.addEventListener("message",function o(h){let l;if(!h||!h.data)return;if(!function(t,e){for(let n of t)if(e===n||"*"===n||n instanceof RegExp&&n.test(e))return!0;return!1}(r,h.origin)){console.warn(`Invalid origin '${h.origin}' for comlink proxy`);return}let{id:c,type:d,path:p}=Object.assign({path:[]},h.data),f=(h.data.argumentList||[]).map(x);try{var y;let n=p.slice(0,-1).reduce((t,e)=>t[e],e),r=p.reduce((t,e)=>t[e],e);switch(d){case"GET":l=r;break;case"SET":n[p.slice(-1)[0]]=x(h.data.value),l=!0;break;case"APPLY":l=r.apply(n,f);break;case"CONSTRUCT":{let t=new r(...f);l=Object.assign(t,{[i]:!0})}break;case"ENDPOINT":{let{port1:n,port2:i}=new MessageChannel;t(e,i),y=[n],v.set(n,y),l=n}break;case"RELEASE":l=void 0;break;default:return}}catch(t){l={value:t,[s]:0}}Promise.resolve(l).catch(t=>({value:t,[s]:0})).then(t=>{let[i,r]=b(t);n.postMessage(Object.assign(Object.assign({},i),{id:c}),r),"RELEASE"===d&&(n.removeEventListener("message",o),u(n),a in e&&"function"==typeof e[a]&&e[a]())}).catch(t=>{let[e,i]=b({value:TypeError("Unserializable return value"),[s]:0});n.postMessage(Object.assign(Object.assign({},e),{id:c}),i)})}),n.start&&n.start()}(t,e),[n,[n]]},deserialize:t=>(t.start(),c(t))}],["throw",{canHandle:t=>h(t)&&s in t,serialize:({value:t})=>[t instanceof Error?{isError:!0,value:{message:t.message,name:t.name,stack:t.stack}}:{isError:!1,value:t},[]],deserialize(t){if(t.isError)throw Object.assign(Error(t.value.message),t.value);throw t.value}}]]);function u(t){"MessagePort"===t.constructor.name&&t.close()}function c(t,e){let n=new Map;return t.addEventListener("message",function(t){let{data:e}=t;if(!e||!e.id)return;let i=n.get(e.id);if(i)try{i(e)}finally{n.delete(e.id)}}),function t(e,n,i=[],a=function(){}){let s=!1,h=new Proxy(a,{get(r,a){if(d(s),a===o)return()=>{y&&y.unregister(h),p(e),n.clear(),s=!0};if("then"===a){if(0===i.length)return{then:()=>h};let t=m(e,n,{type:"GET",path:i.map(t=>t.toString())}).then(x);return t.then.bind(t)}return t(e,n,[...i,a])},set(t,r,o){d(s);let[a,h]=b(o);return m(e,n,{type:"SET",path:[...i,r].map(t=>t.toString()),value:a},h).then(x)},apply(o,a,h){d(s);let l=i[i.length-1];if(l===r)return m(e,n,{type:"ENDPOINT"}).then(x);if("bind"===l)return t(e,n,i.slice(0,-1));let[u,c]=g(h);return m(e,n,{type:"APPLY",path:i.map(t=>t.toString()),argumentList:u},c).then(x)},construct(t,r){d(s);let[o,a]=g(r);return m(e,n,{type:"CONSTRUCT",path:i.map(t=>t.toString()),argumentList:o},a).then(x)}});return function(t,e){let n=(f.get(e)||0)+1;f.set(e,n),y&&y.register(t,e,t)}(h,e),h}(t,n,[],e)}function d(t){if(t)throw Error("Proxy has been released and is not useable")}function p(t){return m(t,new Map,{type:"RELEASE"}).then(()=>{u(t)})}let f=new WeakMap,y="FinalizationRegistry"in globalThis&&new FinalizationRegistry(t=>{let e=(f.get(t)||0)-1;f.set(t,e),0===e&&p(t)});function g(t){var e;let n=t.map(b);return[n.map(t=>t[0]),(e=n.map(t=>t[1]),Array.prototype.concat.apply([],e))]}let v=new WeakMap;function b(t){for(let[e,n]of l)if(n.canHandle(t)){let[i,r]=n.serialize(t);return[{type:"HANDLER",name:e,value:i},r]}return[{type:"RAW",value:t},v.get(t)||[]]}function x(t){switch(t.type){case"HANDLER":return l.get(t.name).deserialize(t.value);case"RAW":return t.value}}function m(t,e,n,i){return new Promise(r=>{let o=[,,,,].fill(0).map(()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)).join("-");e.set(o,r),t.start&&t.start(),t.postMessage(Object.assign({id:o},n),i)})}}}]);