(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5550],{33062:function(e,l,i){(window.__NEXT_P=window.__NEXT_P||[]).push(["/construct/app/extra/components/auto-plan/ResourcesCard",function(){return i(5564)}])},23794:function(e,l,i){"use strict";var n=i(92945);let a=(0,n.Z)({scriptUrl:"//at.alicdn.com/t/a/font_4440880_ljyggdw605.js"});l.Z=a},10983:function(e,l,i){"use strict";i.r(l);var n=i(52676),a=i(16019),t=i(10901),u=i(5783),o=i(25675),r=i(87514),s=i(84875),d=i.n(s),c=i(75271),v=i(24841);l.default=e=>{let{uid:l,initValue:i,updateData:s,classNames:f,resourceTypeOptions:m,setCurIcon:x}=e,[p]=u.Z.useForm(),h=u.Z.useWatch("type",p),j=u.Z.useWatch("is_dynamic",p),g=u.Z.useWatch("value",p),{t:Z}=(0,v.$G)(),_=(0,c.useMemo)(()=>(null==m?void 0:m.filter(e=>"all"!==e.value))||[],[m]),{run:y,data:w,loading:b}=(0,t.Z)(async e=>{var l;let[,n]=await (0,a.Vx)((0,a.RX)({type:e}));return p.setFieldsValue({value:(null==i?void 0:i.value)||(null==n?void 0:null===(l=n[0])||void 0===l?void 0:l.key)}),n||[]},{manual:!0});(0,c.useEffect)(()=>{h&&y(h)},[y,h]);let N=(0,c.useMemo)(()=>(null==w?void 0:w.map(e=>({...e,label:e.label,value:e.key+""})))||[],[w]);return(0,c.useEffect)(()=>{let e=p.getFieldsValue(),i=(null==e?void 0:e.is_dynamic)?"":null==e?void 0:e.value;s({uid:l,...e,value:i})},[l,j,p,s,g,h]),(0,n.jsx)("div",{className:d()("flex flex-1",f),children:(0,n.jsxs)(u.Z,{style:{width:"100%"},form:p,labelCol:{span:4},initialValues:{...i},children:[(0,n.jsx)(u.Z.Item,{label:Z("resource_type"),name:"type",children:(0,n.jsx)(o.default,{className:"w-2/5",options:_,onChange:e=>{x({uid:l,icon:e})}})}),(0,n.jsx)(u.Z.Item,{label:Z("resource_dynamic"),name:"is_dynamic",children:(0,n.jsx)(r.Z,{style:{background:j?"#1677ff":"#ccc"}})}),!j&&(0,n.jsxs)(n.Fragment,{children:[" ","image_file"===h||"internet"===h||["text_file","excel_file"].includes(h)?null:(0,n.jsx)(u.Z.Item,{label:Z("resource_value"),name:"value",required:!0,children:(0,n.jsx)(o.default,{placeholder:Z("please_select_param"),options:N,loading:b,className:"w-3/5",allowClear:!0})})]})]})})}},5564:function(e,l,i){"use strict";i.r(l),i.d(l,{default:function(){return Z}});var n=i(52676),a=i(32133),t=i(84875),u=i.n(t),o=e=>{let{className:l,imgUrl:i="/pictures/empty.png"}=e;return(0,n.jsx)("div",{className:u()("m-auto",{className:l}),children:(0,n.jsx)(a.Z,{image:i,imageStyle:{margin:"0 auto",width:"100%",height:"100%"}})})},r=i(83500),s=i(42508),d=i(25675),c=i(30191),v=i(24128),f=i(25377),m=i(32699),x=i(75271),p=i(24841),h=i(5185),j=i(26014),g=i(10983),Z=e=>{var l;let{name:i,updateData:a,resourceTypeOptions:t,initValue:Z}=e,{t:_}=(0,p.$G)(),y=(0,x.useRef)(Z||[]),[w,b]=(0,x.useState)({uid:"",icon:""}),[N,k]=(0,x.useState)((null==Z?void 0:Z.map(e=>({...e,icon:e.type,initVal:e})))||[]),[C,E]=(0,x.useState)([...N]),[S,I]=(0,x.useState)((null==N?void 0:null===(l=N[0])||void 0===l?void 0:l.uid)||""),[T,V]=(0,x.useState)(""),P=(e,l)=>{var n,t;null==e||e.stopPropagation();let u=null===(n=y.current)||void 0===n?void 0:n.findIndex(e=>e.uid===S),o=null==N?void 0:N.filter(e=>e.uid!==l.uid);y.current=y.current.filter(e=>e.uid!==l.uid)||[],a([i,y.current]),k(o),u===(null==N?void 0:N.length)-1&&0!==u&&setTimeout(()=>{var e;I((null==o?void 0:null===(e=o[o.length-1])||void 0===e?void 0:e.uid)||"")},0),I((null==o?void 0:null===(t=o[u])||void 0===t?void 0:t.uid)||"")};return(0,x.useEffect)(()=>{E([...N])},[N]),(0,x.useEffect)(()=>{k(N.map(e=>(null==w?void 0:w.uid)===e.uid?{...e,icon:w.icon}:e))},[w]),(0,n.jsxs)("div",{className:"flex flex-1  h-64 px-3 py-4 border border-[#d6d8da] rounded-md",children:[(0,n.jsxs)("div",{className:"flex flex-col w-40 h-full",children:[(0,n.jsx)(d.default,{options:t,className:"w-full h-8",variant:"borderless",defaultValue:"all",onChange:e=>{var l,i;if("all"===e)E(N),I((null==N?void 0:null===(l=N[0])||void 0===l?void 0:l.uid)||"");else{let l=null==N?void 0:N.filter(l=>(null==l?void 0:l.icon)===e);I((null==l?void 0:null===(i=l[0])||void 0===i?void 0:i.uid)||""),E(l)}}}),(0,n.jsx)("div",{className:"flex flex-1 flex-col gap-1 overflow-y-auto",children:null==C?void 0:C.map(e=>(0,n.jsxs)("div",{className:u()("flex h-8 items-center px-3 pl-[0.6rem] rounded-md hover:bg-[#f5faff] hover:dark:bg-[#606264] cursor-pointer relative",{"bg-[#f5faff] dark:bg-[#606264]":e.uid===S}),onClick:()=>{I(e.uid||"")},onMouseEnter:()=>{V(e.uid||"")},onMouseLeave:()=>{V("")},children:[j.resourceTypeIcon[e.icon||""],(0,n.jsx)(c.Z.Text,{className:u()("flex flex-1 items-center text-sm p-0 m-0 mx-2 line-clamp-1",{"text-[#0c75fc]":e.uid===S}),editable:{autoSize:{maxRows:1},onChange:l=>{k(N.map(i=>i.uid===e.uid?{...i,name:l}:i)),y.current=y.current.map(i=>i.uid===e.uid?{...i,name:l}:i),a([i,y.current])}},ellipsis:{tooltip:!0},children:e.name}),(0,n.jsx)(v.Z,{title:_("want_delete"),onConfirm:l=>{P(l,e)},onCancel:e=>null==e?void 0:e.stopPropagation(),children:(0,n.jsx)(r.Z,{className:"text-sm cursor-pointer  absolute right-2 ".concat(T===e.uid?"opacity-100":"opacity-0"),style:{top:"50%",transform:"translateY(-50%)"},onClick:e=>e.stopPropagation()})})]},e.uid))}),(0,n.jsx)(f.ZP,{className:"w-full h-8",type:"dashed",block:!0,icon:(0,n.jsx)(s.Z,{}),onClick:()=>{var e,l;let n=(0,h.Z)();y.current=(0,m.concat)(y.current,[{is_dynamic:!1,type:null===(e=null==t?void 0:t.filter(e=>"all"!==e.value))||void 0===e?void 0:e[0].value,value:"",uid:n,name:_("resource")+" ".concat(y.current.length+1)}].filter(Boolean)),a([i,y.current]),k(e=>{var l,i,a;return[...e,{icon:(null===(l=null==t?void 0:t.filter(e=>"all"!==e.value))||void 0===l?void 0:null===(i=l[0])||void 0===i?void 0:i.value)||"",uid:n,initVal:{is_dynamic:!1,type:null===(a=null==t?void 0:t.filter(e=>"all"!==e.value))||void 0===a?void 0:a[0].value,value:"",uid:n,name:_("resource")+" ".concat(e.length+1)},name:_("resource")+" ".concat(e.length+1)}]}),I(n),b({uid:n,icon:null===(l=null==t?void 0:t.filter(e=>"all"!==e.value))||void 0===l?void 0:l[0].value})},children:_("add_resource")})]}),(0,n.jsx)("div",{className:"flex flex-1 ml-6 ",children:C&&(null==C?void 0:C.length)>0?(0,n.jsx)("div",{className:"flex flex-1",children:null==C?void 0:C.map(e=>(0,n.jsx)(g.default,{classNames:e.uid===S?"block":"hidden",resourceTypeOptions:t,initValue:e.initVal,setCurIcon:b,updateData:e=>{var l;y.current=null===(l=y.current)||void 0===l?void 0:l.map(l=>(null==l?void 0:l.uid)===(null==e?void 0:e.uid)?{...l,...e}:l),a([i,y.current])},uid:e.uid||""},e.uid))}):(0,n.jsx)(o,{className:"w-40 h-40"})})]})}},26014:function(e,l,i){"use strict";i.r(l),i.d(l,{agentIcon:function(){return Z},resourceTypeIcon:function(){return _}});var n=i(52676),a=i(23794),t=i(69811),u=i(99466),o=i(59718),r=i(4629),s=i(5195),d=i(85042),c=i(25334),v=i(80944),f=i(86607),m=i(79530),x=i(73760),p=i(29916),h=i(99869),j=i(89046),g=i(8194);i(75271);let Z={CodeEngineer:(0,n.jsx)(t.Z,{}),Reporter:(0,n.jsx)(u.Z,{}),DataScientist:(0,n.jsx)(o.Z,{}),Summarizer:(0,n.jsx)(r.Z,{}),ToolExpert:(0,n.jsx)(a.Z,{type:"icon-plugin",style:{fontSize:17.25,marginTop:2}}),Indicator:(0,n.jsx)(s.Z,{}),Dbass:(0,n.jsx)(d.Z,{})},_={all:(0,n.jsx)(c.ProductOutlined,{}),database:(0,n.jsx)(v.Z,{}),knowledge:(0,n.jsx)(f.Z,{}),internet:(0,n.jsx)(m.Z,{}),plugin:(0,n.jsx)(x.Z,{}),text_file:(0,n.jsx)(p.Z,{}),excel_file:(0,n.jsx)(h.Z,{}),image_file:(0,n.jsx)(j.Z,{}),awel_flow:(0,n.jsx)(g.Z,{})};l.default=()=>(0,n.jsx)(n.Fragment,{})}},function(e){e.O(0,[8201,9557,5230,191,5675,5783,5850,7272,9774,2888,179],function(){return e(e.s=33062)}),_N_E=e.O()}]);